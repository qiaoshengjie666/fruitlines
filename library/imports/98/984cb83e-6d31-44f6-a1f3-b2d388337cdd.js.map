{"version":3,"sources":["assets\\gameComon\\scripts\\ad\\videoBanner.js"],"names":["videoAdId","appId","isPlaySuccess","countDownTimeOut","VideoBanner","cc","Class","properties","ctor","instance","statics","create","data","initWithData","callback","count","sys","platform","BYTEDANCE_GAME","appGame","gameServerRoom","adConfig","videoId","toutiao","adUnitId","globalData","videoAd","tt","createRewardedVideoAd","httpUtils","httpPost","consts","HTTP_RECORD_SERVER","title","content","desc","WECHAT_GAME","WX","wx","QQ","qq","BAIDU_GAME","baidu","appSid","swan","onClose","res","isEnded","console","log","clearTimeout","audioMgr","getMusicStatus","onOff","setMusicOnOff","bind","onErrorFuc","listener","errCode","errMsg","onError","playVideoAd","sceneId","cb","setTimeout","destroy","onLoad","offClose","load","then","show","err","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var videoAdId = '';\r\nvar appId = '';\r\nvar isPlaySuccess = false;\r\nvar countDownTimeOut;\r\nvar VideoBanner = cc.Class({\r\n    properties: {\r\n    },\r\n    ctor(){\r\n        this.instance = null;\r\n    },\r\n    statics: {\r\n        create: function (data) {\r\n            if(!this.instance){\r\n                this.instance = new VideoBanner();\r\n                this.instance.initWithData(data);\r\n                return this.instance;\r\n            }\r\n        }\r\n    },\r\n    initWithData: function (data) {\r\n        isPlaySuccess = false;\r\n        this.callback = null;\r\n        this.count = 1;\r\n        if(cc.sys.platform == cc.sys.BYTEDANCE_GAME){ //头条平台\r\n            videoAdId = '1gr8f7hvpon3mb2llf';\r\n            if(appGame.gameServerRoom.adConfig && appGame.gameServerRoom.adConfig.videoId && appGame.gameServerRoom.adConfig.videoId.toutiao){\r\n                videoAdId = appGame.gameServerRoom.adConfig.videoId.toutiao.adUnitId;\r\n            }\r\n            this.globalData = {\r\n                videoAd: tt.createRewardedVideoAd({\r\n                    adUnitId: videoAdId\r\n                }),\r\n            }\r\n            httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'广告位激励视频',content:'创建成功',desc:videoAdId},function(){\r\n            });\r\n        }else if(cc.sys.platform == cc.sys.WECHAT_GAME && appGame.platform == 'WX'){//微信\r\n            videoAdId = 'adunit-168ed0ed4d9f8fad';\r\n            if(appGame.gameServerRoom.adConfig && appGame.gameServerRoom.adConfig.videoId && appGame.gameServerRoom.adConfig.videoId.WX){\r\n                videoAdId = appGame.gameServerRoom.adConfig.videoId.WX.adUnitId;\r\n            }\r\n            this.globalData = {\r\n                videoAd: wx.createRewardedVideoAd({\r\n                    adUnitId: videoAdId,\r\n                }),\r\n            }\r\n            httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'广告位激励视频',content:'创建成功',desc:videoAdId},function(){\r\n            });\r\n        }else if(cc.sys.platform == cc.sys.WECHAT_GAME && appGame.platform == 'QQ'){//qq\r\n            videoAdId = 'adunit-168ed0ed4d9f8fad';\r\n            if(appGame.gameServerRoom.adConfig && appGame.gameServerRoom.adConfig.videoId && appGame.gameServerRoom.adConfig.videoId.QQ){\r\n                videoAdId = appGame.gameServerRoom.adConfig.videoId.QQ.adUnitId;\r\n            }\r\n            this.globalData = {\r\n                videoAd: qq.createRewardedVideoAd({\r\n                    adUnitId: videoAdId\r\n                }),\r\n            }\r\n            httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'广告位激励视频',content:'创建成功',desc:videoAdId},function(){\r\n            });\r\n        }else if(cc.sys.platform == cc.sys.BAIDU_GAME){//百度\r\n            videoAdId = '7433930';\r\n            if(appGame.gameServerRoom.adConfig && appGame.gameServerRoom.adConfig.videoId && appGame.gameServerRoom.adConfig.videoId.baidu){\r\n                videoAdId = appGame.gameServerRoom.adConfig.videoId.baidu.adUnitId;\r\n            }\r\n            if(appGame.gameServerRoom.adConfig && appGame.gameServerRoom.adConfig.videoId && appGame.gameServerRoom.adConfig.videoId.baidu){\r\n                appId = appGame.gameServerRoom.adConfig.videoId.baidu.appSid;\r\n            }\r\n            this.globalData = {\r\n                videoAd: swan.createRewardedVideoAd({\r\n                    adUnitId: videoAdId,\r\n                    appSid: appId\r\n                }),\r\n            }\r\n        }\r\n        httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'广告位激励视频',content:'创建成功',desc:videoAdId},function(){\r\n        });\r\n        if(cc.sys.platform != cc.sys.WECHAT_GAME){\r\n            if (this.globalData && this.globalData.videoAd) {\r\n                this.globalData.videoAd.onClose(function(res){\r\n                    if (res.isEnded) {\r\n                        console.log(\"看完视频关闭\")\r\n                        httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'广告位激励视频',content:'点击关闭',desc:videoAdId+\"播放成功\"},function(){\r\n                        });\r\n                        clearTimeout(countDownTimeOut);\r\n                        this.callback && this.callback(1);\r\n                        appGame.audioMgr.getMusicStatus(function(onOff){\r\n                            if(onOff){\r\n                                appGame.audioMgr.setMusicOnOff(onOff);\r\n                            }\r\n                        }.bind(this));\r\n                    } else {\r\n                        httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'广告位激励视频',content:'点击关闭',desc:videoAdId+\"播放失败\"},function(){\r\n                        });\r\n                        console.log(\"未看完视频关闭\")\r\n                        clearTimeout(countDownTimeOut);\r\n                        this.callback && this.callback(2);\r\n                        appGame.audioMgr.getMusicStatus(function(onOff){\r\n                            if(onOff){\r\n                                appGame.audioMgr.setMusicOnOff(onOff);\r\n                            }\r\n                        }.bind(this));\r\n                    }\r\n                }.bind(this));\r\n                let onErrorFuc = function (listener) {\r\n                    console.log(\"播放视频广告出问题\"+listener.errCode+listener.errMsg)\r\n                    httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'广告位激励视频',content:videoAdId,desc:listener.errCode+listener.errMsg},function(){\r\n                    });\r\n                    clearTimeout(countDownTimeOut);\r\n                    this.callback && this.callback(3);\r\n                    appGame.audioMgr.getMusicStatus(function(onOff){\r\n                        if(onOff){\r\n                            appGame.audioMgr.setMusicOnOff(onOff);\r\n                        }\r\n                    }.bind(this));\r\n                }.bind(this);\r\n                this.globalData.videoAd.onError(onErrorFuc);\r\n                //this.globalData.videoAd.offError(onErrorFuc);\r\n            }  \r\n        }\r\n    },\r\n\r\n    playVideoAd:function(sceneId,cb) {\r\n        isPlaySuccess = false;\r\n        console.log(\"播放视频广告\")\r\n        this.count++;\r\n        httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'广告位激励视频',content:this.count,desc:videoAdId},function(){\r\n        });\r\n        clearTimeout(countDownTimeOut);\r\n        if(this.globalData && this.globalData.videoAd){\r\n            appGame.audioMgr.getMusicStatus(function(onOff){\r\n                if(onOff){\r\n                    appGame.audioMgr.setMusicOnOff(onOff);\r\n                }\r\n            }.bind(this));\r\n            countDownTimeOut = setTimeout(function() {\r\n                if(!isPlaySuccess){\r\n                    console.log(\"倒计时到返回回调\")\r\n                    clearTimeout(countDownTimeOut);\r\n                    appGame.audioMgr.getMusicStatus(function(onOff){\r\n                        if(onOff){\r\n                            appGame.audioMgr.setMusicOnOff(onOff);\r\n                        }\r\n                    }.bind(this));\r\n                    cb(3);\r\n                }\r\n            }.bind(this), 5000);\r\n            let videoAd = this.globalData.videoAd;\r\n            if(cc.sys.platform == cc.sys.WECHAT_GAME && (appGame.platform == 'WX' ||appGame.platform == 'QQ')){\r\n                console.log(\"播放微信视频\")\r\n                if (videoAd) {\r\n                    videoAd.destroy();\r\n                }\r\n                let videoAd = null;\r\n                if(appGame.platform == 'WX'){\r\n                    videoAd = wx.createRewardedVideoAd({\r\n                        adUnitId: videoAdId\r\n                    })\r\n                }else{\r\n                    videoAd = qq.createRewardedVideoAd({\r\n                        adUnitId: videoAdId\r\n                    })\r\n                }\r\n                \r\n                httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'广告位激励视频',content:'创建成功',desc:videoAdId},function(){\r\n                });\r\n                videoAd.onError(function (res) {\r\n                    clearTimeout(countDownTimeOut);\r\n                    this.callback && this.callback(3);\r\n                    appGame.audioMgr.getMusicStatus(function(onOff){\r\n                        if(onOff){\r\n                            appGame.audioMgr.setMusicOnOff(onOff);\r\n                        }\r\n                    }.bind(this));\r\n                    httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'广告位激励视频',content:videoAdId,desc:res.errCode+res.errMsg},function(){\r\n                    });\r\n                    console.log('videoAd onError', res)\r\n                }.bind(this))\r\n                videoAd.onLoad(function (res) {\r\n                    console.log('videoAd onLoad', res)\r\n                })\r\n                videoAd.onClose(function (res) {\r\n                    console.log(\"关闭微信视频========\"+res.isEnded)\r\n                    if (res.isEnded) {\r\n                        httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'广告位激励视频',content:'点击关闭',desc:videoAdId+\"播放成功\"},function(){\r\n                        });\r\n                        clearTimeout(countDownTimeOut);\r\n                        this.callback && this.callback(1);\r\n                        appGame.audioMgr.getMusicStatus(function(onOff){\r\n                            if(onOff){\r\n                                appGame.audioMgr.setMusicOnOff(onOff);\r\n                            }\r\n                        }.bind(this));\r\n                    } else {\r\n                        httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'广告位激励视频',content:'点击关闭',desc:videoAdId+\"播放失败\"},function(){\r\n                        });\r\n                        clearTimeout(countDownTimeOut);\r\n                        this.callback && this.callback(2);\r\n                        appGame.audioMgr.getMusicStatus(function(onOff){\r\n                            if(onOff){\r\n                                appGame.audioMgr.setMusicOnOff(onOff);\r\n                            }\r\n                        }.bind(this));\r\n                    }\r\n                    videoAd.offClose()\r\n                }.bind(this))\r\n                videoAd.load()\r\n                    .then(() => {\r\n                        console.log('激励视频加载成功');\r\n                        videoAd.show().then(() => {\r\n                            isPlaySuccess = true;\r\n                            httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'广告位激励视频',content:'展示成功',desc:videoAdId+sceneId},function(){\r\n                            });\r\n                            console.log('激励视频 广告显示成功')\r\n                        })\r\n                        .catch(err => {\r\n                            httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'广告位激励视频',content:'展示失败',desc:videoAdId+sceneId},function(){\r\n                            });\r\n                            console.log('激励视频 广告显示失败')\r\n                        })\r\n                    })\r\n                    .catch(err => {\r\n                        console.log('激励视频加载失败');\r\n                    })\r\n                this.callback = cb;\r\n            }else{\r\n                videoAd\r\n                .show()\r\n                .then(() => {\r\n                    isPlaySuccess = true;\r\n                    httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'广告位激励视频',content:'展示成功',desc:videoAdId+sceneId},function(){\r\n                    });\r\n                    console.log(\"广告显示成功\");\r\n                })\r\n                .catch((err) => {\r\n                    httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'广告位激励视频',content:'展示失败',desc:videoAdId+sceneId},function(){\r\n                    });\r\n                    console.log(\"广告组件出现问题\", err);\r\n                    // 可以手动加载一次\r\n                    videoAd.load().then(() => {\r\n                        console.log(\"手动加载成功\");\r\n                        // 加载成功后需要再显示广告\r\n                        httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'广告位激励视频',content:'手动加载成功',desc:videoAdId},function(){\r\n                        });\r\n                        isPlaySuccess = true;\r\n                        return videoAd.show();\r\n                    });\r\n                });\r\n                this.callback = cb;\r\n            }\r\n        }else{//没有激励视频的直接返回\r\n            appGame.audioMgr.getMusicStatus(function(onOff){\r\n                if(onOff){\r\n                    appGame.audioMgr.setMusicOnOff(onOff);\r\n                }\r\n            }.bind(this));\r\n            cb(1);\r\n        }\r\n    },\r\n});\r\nmodule.exports = VideoBanner;\r\n"]}