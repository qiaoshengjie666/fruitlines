{"version":3,"sources":["assets\\gameComon\\scripts\\ad\\qqAppBox.js"],"names":["QQAppBOX","cc","Class","Component","properties","ctor","instance","statics","create","data","initWithData","boxId","sys","platform","WECHAT_GAME","appGame","res","qq","getSystemInfoSync","width","windowWidth","height","windowHeight","gameServerRoom","adConfig","QQ","adUnitId","globalData","appbox","createAppBox","httpUtils","httpPost","consts","HTTP_RECORD_SERVER","title","content","desc","playBox","show","load","then","destroy","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var QQAppBOX = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n    },\r\n    ctor(){\r\n        this.instance = null;\r\n    },\r\n    statics: {\r\n        create: function (data) {\r\n            if(!this.instance){\r\n                this.instance = new QQAppBOX();\r\n                this.instance.initWithData(data);\r\n                return this.instance;\r\n            }\r\n        }\r\n    },\r\n    initWithData: function (data) {\r\n        this.boxId = '';\r\n        if(cc.sys.platform == cc.sys.WECHAT_GAME &&appGame.platform == 'QQ'){ //QQ  \r\n            const res = qq.getSystemInfoSync();\r\n            this.width = res.windowWidth;\r\n            this.height = res.windowHeight;\r\n            // var Version2 = util.compareVersion(res.SDKVersion,\"1.7.1\");\r\n            // if(Version2 > 0){\r\n                this.boxId = \"686b9ffc40992b21d352e841f3bb2085\";\r\n                if(appGame.gameServerRoom.adConfig && appGame.gameServerRoom.adConfig.boxId && appGame.gameServerRoom.adConfig.boxId.QQ){\r\n                    this.boxId = appGame.gameServerRoom.adConfig.boxId.QQ.adUnitId;\r\n                }\r\n                this.globalData = {\r\n                    appbox:qq.createAppBox({\r\n                        adUnitId: this.boxId\r\n                    })\r\n                }\r\n                httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'广告盒子',content:'创建成功',desc:this.boxId},function(){\r\n                });\r\n            // }else{\r\n            //     httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'广告盒子',content:'基础库版本太低不创建广告盒子',desc:''},function(){})\r\n            // }    \r\n        }       \r\n    },\r\n    playBox:function(show){\r\n        if(this.globalData && this.globalData.appbox){\r\n            if(show){\r\n                this.globalData.appbox.load().then(()=>{\r\n                    this.globalData.appbox.show();\r\n                    httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'广告盒子',content:'展示成功',desc:this.boxId},function(){\r\n                    });\r\n                });\r\n            }else{\r\n                this.globalData.appbox.destroy();\r\n                httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'广告盒子',content:'隐藏',desc:this.boxId},function(){\r\n                });\r\n            }\r\n        }\r\n    }\r\n});\r\nmodule.exports = QQAppBOX;"]}