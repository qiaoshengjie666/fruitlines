{"version":3,"sources":["assets\\gameComon\\result\\result.js"],"names":["cc","Class","Component","properties","title","Label","contentLabel","nextBtn","Button","backBtn","nextBtnCallback","backBtnCallback","onLoad","node","on","Node","EventType","TOUCH_END","onNextBtnClicked","onBackBtnClicked","start","show","opts","nextCB","backCB","info","config","isWin","resultConfig","win","fail","refreshUI","string","content","getChildByName","getComponent","btn1","name","btn2","active","icon","appGame","interstitialAd","playAd","banner","playBanner","gridAd","playGridAd","nativeAd","playNativeAd","appBoxAd","playBox","blockAd","playBlockad","httpUtils","httpPost","consts","HTTP_RECORD_SERVER","event","desc","isPlayVideo","isForce","video","force","videoBanner","playVideoAd","isSuc","hide","bind","console","log","removeFromParent"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        title:cc.Label,\r\n        contentLabel:cc.Label,\r\n        nextBtn:cc.Button,\r\n        backBtn:cc.Button,\r\n        nextBtnCallback: null,\r\n        backBtnCallback: null\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.nextBtn.node.on(cc.Node.EventType.TOUCH_END,this.onNextBtnClicked,this);\r\n        this.backBtn.node.on(cc.Node.EventType.TOUCH_END,this.onBackBtnClicked,this);\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    /**\r\n     * @param opts\r\n     * nextCB 下一局按钮回调\r\n     * backCB 重玩本关按钮回调\r\n     */\r\n     show: function (opts) {\r\n        opts = opts || {};\r\n        if(opts.nextCB){\r\n            this.nextBtnCallback = opts.nextCB;\r\n        }\r\n        if(opts.backCB){\r\n            this.backBtnCallback = opts.backCB;\r\n        }\r\n        if(opts.info){\r\n            this.info = opts.info;\r\n        }\r\n        if(opts.config){\r\n            if(this.info.isWin){\r\n                this.resultConfig = opts.config.win;\r\n            }else{\r\n                this.resultConfig = opts.config.fail;\r\n            }\r\n        }\r\n        this.refreshUI();\r\n    },\r\n\r\n    refreshUI(){\r\n        if(this.info){\r\n            this.title.string = this.info.isWin?this.resultConfig.title:this.resultConfig.title;\r\n            this.contentLabel.string = this.info.isWin?this.resultConfig.content:this.resultConfig.content;\r\n\r\n            this.nextBtn.node.getChildByName('Background').getChildByName('New Label').getComponent(cc.Label).string = this.resultConfig.btn1.name;\r\n            this.backBtn.node.getChildByName('Background').getChildByName('New Label').getComponent(cc.Label).string = this.resultConfig.btn2.name;\r\n\r\n            this.nextBtn.node.getChildByName('Background').getChildByName('icon').active = this.resultConfig.btn1.icon;\r\n            this.backBtn.node.getChildByName('Background').getChildByName('icon').active = this.resultConfig.btn2.icon;\r\n        }\r\n        if(appGame.interstitialAd){\r\n            appGame.interstitialAd.playAd();\r\n        }\r\n        appGame.banner.playBanner(2);\r\n        appGame.gridAd.playGridAd(true);\r\n        appGame.nativeAd.playNativeAd(true);\r\n        appGame.appBoxAd.playBox(true);\r\n        appGame.blockAd.playBlockad(true,4);\r\n        httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'结算',content:'打开结算界面'},function(){\r\n        });\r\n    },\r\n\r\n    onNextBtnClicked(event){\r\n        httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'结算',content:'下一关',desc:'点击'},function(){\r\n        });\r\n        let isPlayVideo = false;\r\n        let isForce = true;\r\n        if(this.resultConfig){\r\n            isPlayVideo = this.resultConfig.btn1.video;\r\n            isForce = this.resultConfig.btn1.force;\r\n        }\r\n        if(isPlayVideo){\r\n            appGame.videoBanner.playVideoAd(3,isForce,function(isSuc){\r\n                this.nextBtnCallback && this.nextBtnCallback(this.info.isWin);\r\n                this.hide();\r\n            }.bind(this));\r\n        }else{\r\n            this.nextBtnCallback && this.nextBtnCallback(this.info.isWin);\r\n            this.hide();\r\n        }\r\n    },\r\n\r\n    onBackBtnClicked(event){\r\n        httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'结算',content:'再来一局+点击'},function(){\r\n        });\r\n        let isPlayVideo = false;\r\n        let isForce = true;\r\n        if(this.resultConfig){\r\n            isPlayVideo = this.resultConfig.btn2.video;\r\n            isForce = this.resultConfig.btn2.force;\r\n        }\r\n        \r\n        if(isPlayVideo){//配置需要播放视频\r\n            appGame.videoBanner.playVideoAd(3,isForce,function(isSuc){\r\n                console.log(\"看视频成功\")\r\n                this.backBtnCallback && this.backBtnCallback(this.info.isWin);\r\n                this.hide();\r\n            }.bind(this));\r\n        }else{//不用播放视频\r\n            this.backBtnCallback && this.backBtnCallback(this.info.isWin);\r\n            this.hide();\r\n        }\r\n    },\r\n    hide(){\r\n        httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'结算',content:'关闭结算界面'},function(){\r\n        });\r\n        appGame.banner.playBanner(3);\r\n        appGame.gridAd.playGridAd(false);\r\n        appGame.nativeAd.playNativeAd(false);\r\n        appGame.appBoxAd.playBox(false);\r\n        appGame.blockAd.playBlockad(false);\r\n        this.node.removeFromParent();\r\n    }\r\n\r\n    // update (dt) {},\r\n});\r\n"]}