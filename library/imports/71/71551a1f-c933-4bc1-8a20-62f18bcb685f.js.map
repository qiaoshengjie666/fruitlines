{"version":3,"sources":["assets\\gameComon\\screenRecord\\screenrecordAuto.js"],"names":["recorder","screenTime","ScreenAuto","cc","Class","properties","ctor","instance","statics","create","data","initWithData","onDestroy","clearTimeout","playScreenCap","caping","sys","platform","BYTEDANCE_GAME","appGame","isClick","setTimeout","console","log","bind","tt","getGameRecorderManager","start","duration","onStart","res","onStop","videoPath","screenPath","stop","module","exports"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,QAAJ;AACA,IAAIC,UAAJ;AACA,IAAIC,UAAU,GAAGC,EAAE,CAACC,KAAH,CAAS;AACtBC,EAAAA,UAAU,EAAE,EADU;AAGtBC,EAAAA,IAHsB,kBAGhB;AACF,SAAKC,QAAL,GAAgB,IAAhB;AACH,GALqB;AAMtBC,EAAAA,OAAO,EAAE;AACLC,IAAAA,MAAM,EAAE,gBAAUC,IAAV,EAAgB;AACpB,UAAG,CAAC,KAAKH,QAAT,EAAkB;AACd,aAAKA,QAAL,GAAgB,IAAIL,UAAJ,EAAhB;AACA,aAAKK,QAAL,CAAcI,YAAd,CAA2BD,IAA3B;AACA,eAAO,KAAKH,QAAZ;AACH;AACJ;AAPI,GANa;AAetBK,EAAAA,SAfsB,uBAeX;AACPC,IAAAA,YAAY,CAACZ,UAAD,CAAZ;AACH,GAjBqB;AAkBtBU,EAAAA,YAlBsB,wBAkBTD,IAlBS,EAkBJ,CACjB,CAnBqB;AAqBtBI,EAAAA,aArBsB,yBAqBRC,MArBQ,EAqBD;AAIjB,QAAGZ,EAAE,CAACa,GAAH,CAAOC,QAAP,IAAmBd,EAAE,CAACa,GAAH,CAAOE,cAA7B,EAA4C;AAAE;AAC1C,UAAGH,MAAH,EAAU;AACNI,QAAAA,OAAO,CAACC,OAAR,GAAkB,KAAlB;AACAnB,QAAAA,UAAU,GAAGoB,UAAU,CAAC,YAAW;AAC/BC,UAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACAJ,UAAAA,OAAO,CAACC,OAAR,GAAkB,IAAlB;AACAP,UAAAA,YAAY,CAACZ,UAAD,CAAZ;AACH,SAJuB,CAItBuB,IAJsB,CAIjB,IAJiB,CAAD,EAIT,IAJS,CAAvB;AAMA,YAAG,CAACxB,QAAJ,EAAcA,QAAQ,GAAGyB,EAAE,CAACC,sBAAH,EAAX;AACd1B,QAAAA,QAAQ,CAAC2B,KAAT,CAAe;AACXC,UAAAA,QAAQ,EAAE;AADC,SAAf;AAIA5B,QAAAA,QAAQ,CAAC6B,OAAT,CAAiB,UAAAC,GAAG,EAAG;AACnBR,UAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACH,SAFD;AAIAvB,QAAAA,QAAQ,CAAC+B,MAAT,CAAgB,UAAAD,GAAG,EAAG;AAClBR,UAAAA,OAAO,CAACC,GAAR,CAAY,WAASO,GAAG,CAACE,SAAzB;AACAb,UAAAA,OAAO,CAACc,UAAR,GAAqBH,GAAG,CAACE,SAAzB;AACH,SAHD;AAIH,OArBD,MAqBK;AACDnB,QAAAA,YAAY,CAACZ,UAAD,CAAZ;AACAqB,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACA,YAAG,CAACvB,QAAJ,EAAcA,QAAQ,GAAGyB,EAAE,CAACC,sBAAH,EAAX;AACd1B,QAAAA,QAAQ,CAACkC,IAAT;AACAlC,QAAAA,QAAQ,CAAC+B,MAAT,CAAgB,UAACD,GAAD,EAAS;AACrBX,UAAAA,OAAO,CAACc,UAAR,GAAqBH,GAAG,CAACE,SAAzB;AACH,SAFD;AAGH;AACJ;AACJ;AAzDqB,CAAT,CAAjB;AA2DAG,MAAM,CAACC,OAAP,GAAiBlC,UAAjB","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\nvar recorder;\r\nvar screenTime;\r\nvar ScreenAuto = cc.Class({\r\n    properties: {\r\n    },\r\n    ctor(){\r\n        this.instance = null;\r\n    },\r\n    statics: {\r\n        create: function (data) {\r\n            if(!this.instance){\r\n                this.instance = new ScreenAuto();\r\n                this.instance.initWithData(data);\r\n                return this.instance;\r\n            }\r\n        }\r\n    },\r\n    onDestroy(){\r\n        clearTimeout(screenTime);\r\n    },\r\n    initWithData(data){\r\n    },\r\n\r\n    playScreenCap(caping){\r\n \r\n\r\n    \r\n        if(cc.sys.platform == cc.sys.BYTEDANCE_GAME){ //头条平台\r\n            if(caping){\r\n                appGame.isClick = false;\r\n                screenTime = setTimeout(function() {\r\n                    console.log(\"setTimeout\")\r\n                    appGame.isClick = true;\r\n                    clearTimeout(screenTime);\r\n                }.bind(this), 5000);\r\n        \r\n                if(!recorder) recorder = tt.getGameRecorderManager();\r\n                recorder.start({\r\n                    duration: 10000,\r\n                });\r\n        \r\n                recorder.onStart(res =>{\r\n                    console.log('开始录屏');\r\n                });\r\n        \r\n                recorder.onStop(res =>{\r\n                    console.log('录屏结束=='+res.videoPath);\r\n                    appGame.screenPath = res.videoPath;\r\n                });\r\n            }else{\r\n                clearTimeout(screenTime);\r\n                console.log(\"clearTimeout\")\r\n                if(!recorder) recorder = tt.getGameRecorderManager();\r\n                recorder.stop();\r\n                recorder.onStop((res) => {\r\n                    appGame.screenPath = res.videoPath;\r\n                });\r\n            }\r\n        }\r\n    }\r\n});\r\nmodule.exports = ScreenAuto;\r\n"]}