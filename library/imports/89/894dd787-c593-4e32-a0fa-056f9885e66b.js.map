{"version":3,"sources":["assets\\Game\\Scripts\\Info.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import DataCenter, { dc, field } from \"../../framework/plugin_boosts/misc/DataCenter\";\nimport { R } from \"./hex-lines-game/Res\";\nimport { Toast } from \"../../framework/plugin_boosts/ui/ToastManager\";\nimport Device from \"../../framework/plugin_boosts/gamesys/Device\";\n\n\n\nexport enum ChoiceType  {\n    DailyGet,\n    Levelup,\n    Get,\n    Shop,\n    BannerAdRefresh,\n    HB,\n}\n\n@dc(\"Info\")\nexport default class UserInfoClass extends DataCenter\n{\n    choices:[] = []\n    version:string = \"6\";\n    // ret: 0:directly-get 1:share 2:video\n    getChoice(slotId)\n    {\n        return this.choices[slotId] || 0;\n    }\n\n    init()\n    {\n\n    }\n    onGetConfig(data)\n    {\n        if(data)\n        {\n            let record = data[0]\n            if(record)\n            {\n                this.choices = JSON.parse(record[this.version])\n            }\n        } \n     \n    }\n\n    @field()\n    level:number = 1;\n\n    @field()\n    selectedSkin:string = \"2\";\n\n    @field()\n    dailyGetTime:number =  new Date(2018,1,1).getTime();\n\n    @field()\n    freedrawTime:number = this.dailyGetTime;\n\n    @field()\n    luckyVideoWatchTime:number = this.dailyGetTime\n\n    @field()\n    shopFreeDiamondTime:number = this.dailyGetTime;\n\n    @field()\n    diamond:number = 0;\n\n    @field()\n    sfx_enabled:boolean = true;\n\n    @field()\n    firstTimeReach:boolean = false;\n\n    @field()\n    luckyVideoWatchCount:number = 0;\n    timePassed: number = 0;\n    stepUsed:number = 0;\n\n    addDiamond(d,b = true)\n    {\n        if(typeof(d) == \"number\") this.diamond += d;\n        else this.diamond += parseInt(d);\n        if(b)\n        {\n            Toast.make(\"获得钻石 x\" + d)\n            Device.playEffect(R.audio_get_diamond);\n        }\n        if(!this.firstTimeReach)\n        {\n            if(this.diamond >= 500)\n            {\n                Toast.make(\"哇可以买皮肤了，快去皮肤商店看看吧!\",2)\n                this.firstTimeReach = true\n                UserInfo.save();\n            }\n        }\n    }\n\n    currentLevel:number = 1;\n\n    constructor()\n    {\n        super();\n        this.unlock(this.selectedSkin);\n        setTimeout(()=>{\n            this.save();\n        }, 60 * 1000)\n        // onexit game =>save\n    }\n\n    isUnlock(skin_id)\n    {\n        let carUnlocked =  localStorage.getItem(\"unlocked_\"+skin_id);\n        if(!carUnlocked)\n        {\n            return false\n        }else\n        {\n            return carUnlocked == \"1\"\n        }\n    }\n\n    isAllUnlocked()\n    {\n        let c = 0;\n        for(var i = 0 ;i <R.skinConfig.json.length;i++)\n        {\n            var v = R.skinConfig.json[i]\n            if(UserInfo.isUnlock(v.id))\n            {\n                c ++\n            }\n        }   \n        return c == R.skinConfig.json.length\n    }\n\n\n    getSkinById(id: any): any {\n        let res = R.skinConfig.json.filter(v=>{return v.id == id});\n        return res[0]\n    }\n\n\n    unlock(skin_id)\n    {\n        localStorage.setItem(\"unlocked_\"+skin_id , \"1\")\n    }\n\n}\nexport var UserInfo:UserInfoClass = DataCenter.register(UserInfoClass)"]}