{"version":3,"sources":["assets\\gameComon\\scripts\\ad\\nativeAd.js"],"names":["NativeAd","cc","Class","properties","ctor","instance","statics","create","data","initWithData","sys","platform","OPPO_GAME","globalData","nativeAd","qg","createNativeAd","adUnitId","onLoad","res","log","JSON","stringify","adList","length","appGame","nativeAdData","gameServerRoom","emit","consts","LOCAL_GAME_RESULT_NATIVE_AD","onError","err","playAd","console","load","then","show","module","exports"],"mappings":";;;;;;AAAA,IAAIA,QAAQ,GAAGC,EAAE,CAACC,KAAH,CAAS;AACpBC,EAAAA,UAAU,EAAE,EADQ;AAGpBC,EAAAA,IAHoB,kBAGd;AACF,SAAKC,QAAL,GAAgB,IAAhB;AACH,GALmB;AAMpBC,EAAAA,OAAO,EAAE;AACLC,IAAAA,MAAM,EAAE,gBAAUC,IAAV,EAAgB;AACpB,UAAG,CAAC,KAAKH,QAAT,EAAkB;AACd,aAAKA,QAAL,GAAgB,IAAIL,QAAJ,EAAhB;AACA,aAAKK,QAAL,CAAcI,YAAd,CAA2BD,IAA3B;AACA,eAAO,KAAKH,QAAZ;AACH;AACJ;AAPI,GANW;AAepBI,EAAAA,YAAY,EAAE,sBAAUD,IAAV,EAAgB;AAC1B,QAAGP,EAAE,CAACS,GAAH,CAAOC,QAAP,IAAmBV,EAAE,CAACS,GAAH,CAAOE,SAA7B,EAAuC;AAAC;AACpC,WAAKC,UAAL,GAAkB;AACdC,QAAAA,QAAQ,EAAEC,EAAE,CAACC,cAAH,CAAkB;AACxBC,UAAAA,QAAQ,EAAE;AADc,SAAlB;AADI,OAAlB;AAKH;;AACD,QAAG,KAAKJ,UAAL,IAAmB,KAAKA,UAAL,CAAgBC,QAAtC,EAA+C;AAC3C;AACA,WAAKD,UAAL,CAAgBC,QAAhB,CAAyBI,MAAzB,CAAgC,UAAAC,GAAG,EAAI;AACnClB,QAAAA,EAAE,CAACmB,GAAH,gEAAuBC,IAAI,CAACC,SAAL,CAAeH,GAAf,CAAvB;AACAA,QAAAA,GAAG,CAACI,MAAJ,IAAcJ,GAAG,CAACI,MAAJ,CAAWC,MAAX,GAAoB,CAAlC,KAAwCC,OAAO,CAACC,YAAR,GAAuBP,GAAG,CAACI,MAAJ,CAAW,CAAX,CAA/D;AACAE,QAAAA,OAAO,CAACE,cAAR,CAAuBC,IAAvB,CAA4BC,MAAM,CAACC,2BAAnC,EAA+D,EAA/D;AACH,OAJD,EAF2C,CAO3C;;AACA,WAAKjB,UAAL,CAAgBC,QAAhB,CAAyBiB,OAAzB,CAAiC,UAAAC,GAAG,EAAI;AACpC/B,QAAAA,EAAE,CAACmB,GAAH,4DAAmBC,IAAI,CAACC,SAAL,CAAeU,GAAf,CAAnB;AACH,OAFD;AAGH;AAEJ,GApCmB;AAqCpBC,EAAAA,MAAM,EAAE,kBAAW;AACfC,IAAAA,OAAO,CAACd,GAAR,CAAY,UAAZ;;AACA,QAAG,KAAKP,UAAL,IAAmB,KAAKA,UAAL,CAAgBC,QAAtC,EAA+C;AAC3C,UAAIA,QAAQ,GAAG,KAAKD,UAAL,CAAgBC,QAA/B;AACAA,MAAAA,QAAQ,CACPqB,IADD,GAECC,IAFD,CAEM,YAAM;AACRF,QAAAA,OAAO,CAACd,GAAR,CAAY,UAAZ;AACA,eAAON,QAAQ,CAACuB,IAAT,EAAP;AACH,OALD,WAMO,UAACL,GAAD,EAAS;AACZE,QAAAA,OAAO,CAACd,GAAR,CAAY,UAAZ,EAAwBY,GAAxB;AACH,OARD;AASH;AACJ;AAnDmB,CAAT,CAAf;AAqDAM,MAAM,CAACC,OAAP,GAAiBvC,QAAjB","sourceRoot":"/","sourcesContent":["var NativeAd = cc.Class({\r\n    properties: {\r\n    },\r\n    ctor(){\r\n        this.instance = null;\r\n    },\r\n    statics: {\r\n        create: function (data) {\r\n            if(!this.instance){\r\n                this.instance = new NativeAd();\r\n                this.instance.initWithData(data);\r\n                return this.instance;\r\n            }\r\n        }\r\n    },\r\n    initWithData: function (data) {\r\n        if(cc.sys.platform == cc.sys.OPPO_GAME){//oppo\r\n            this.globalData = {\r\n                nativeAd: qg.createNativeAd({\r\n                    adUnitId: '226783',\r\n                }),\r\n            }\r\n        }\r\n        if(this.globalData && this.globalData.nativeAd){\r\n            // 设置原生广告加载成功回调\r\n            this.globalData.nativeAd.onLoad(res => {\r\n                cc.log(`加载原生广告成功`, `：${JSON.stringify(res)}`)\r\n                res.adList && res.adList.length > 0 && (appGame.nativeAdData = res.adList[0])\r\n                appGame.gameServerRoom.emit(consts.LOCAL_GAME_RESULT_NATIVE_AD,{});\r\n            })\r\n            // 设置原生广告出错回调\r\n            this.globalData.nativeAd.onError(err => {\r\n                cc.log(`设置原生广告出错：${JSON.stringify(err)}`)\r\n            })\r\n        }\r\n        \r\n    },\r\n    playAd: function() {\r\n        console.log(\"播放原生广告==\")\r\n        if(this.globalData && this.globalData.nativeAd){\r\n            let nativeAd = this.globalData.nativeAd;\r\n            nativeAd\r\n            .load()\r\n            .then(() => {\r\n                console.log(\"原生广告显示成功\");\r\n                return nativeAd.show();\r\n            })\r\n            .catch((err) => {\r\n                console.log(\"原生广告出现问题\", err);\r\n            });\r\n        }\r\n    }\r\n});\r\nmodule.exports = NativeAd;\r\n"]}