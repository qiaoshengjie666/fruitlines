{"version":3,"sources":["assets\\gameComon\\scripts\\roomGame.js"],"names":["Room","require","consts","RoomGame","cc","Class","statics","create","data","roomObj","initWithData","_super","room","videoPath","screenTime","gameConfigData","wordRid","configSuccess2","url","HTTP_GET_PAAS_DATA_SERVER","GAME_ID","appGame","platform","packageVersion","console","log","util","getUrlSerConfig","JSON","stringify","configSuccess1","gameServerRoom","emit","CLIENT_GAME_START","bind","module","exports"],"mappings":";;;;;;AAAA;AACA,IAAIA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAAlB;;AACA,IAAMC,MAAM,GAAGD,OAAO,CAAC,gBAAD,CAAtB;;AACA,IAAIE,QAAQ,GAAGC,EAAE,CAACC,KAAH,CAAS;AACpB,aAASL,IADW;AAGpBM,EAAAA,OAAO,EAAE;AACLC,IAAAA,MAAM,EAAE,gBAAUC,IAAV,EAAgB;AACpB,UAAIC,OAAO,GAAG,IAAIN,QAAJ,EAAd;AACAM,MAAAA,OAAO,CAACC,YAAR,CAAqBF,IAArB;AACA,aAAOC,OAAP;AACH;AALI,GAHW;AAUpBC,EAAAA,YAAY,EAAE,sBAAUF,IAAV,EAAgB;AAC1B,SAAKG,MAAL,CAAYH,IAAI,CAACI,IAAjB,EAD0B,CAE1B;;;AACA,SAAKC,SAAL,GAAiB,EAAjB,CAH0B,CAI1B;;AACA,SAAKC,UAAL,GAAkB,CAAlB;AACA,SAAKC,cAAL,GAAsB,EAAtB;AACA,SAAKC,OAAL,GAAe,EAAf;AACA,SAAKC,cAAL,GAAsB,KAAtB;AACA,QAAIC,GAAG,GAAGhB,MAAM,CAACiB,yBAAP,GAAiC,UAAjC,GAA4CjB,MAAM,CAACkB,OAAnD,GAA2D,QAA3D,GAAoEC,OAAO,CAACC,QAA5E,GACN,WADM,GACMD,OAAO,CAACE,cADd,GAC6B,SAD7B,GACuC,EADvC,GAC0C,YADpD,CAT0B,CAW1B;;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAYP,GAAxB;AACAQ,IAAAA,IAAI,CAACC,eAAL,CAAqBT,GAArB,EAAyB,MAAzB,EAAgC,MAAhC,EAAuC,UAASV,IAAT,EAAc;AACjD,WAAKO,cAAL,GAAsBP,IAAtB;AACAgB,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAUG,IAAI,CAACC,SAAL,CAAe,KAAKd,cAApB,CAAtB;AACA,WAAKE,cAAL,GAAsB,IAAtB;;AACA,UAAG,KAAKA,cAAL,IAAuB,KAAKa,cAA/B,EAA8C;AAC1CT,QAAAA,OAAO,CAACU,cAAR,CAAuBC,IAAvB,CAA4B9B,MAAM,CAAC+B,iBAAnC,EAAqD,EAArD;AACH;AACJ,KAPsC,CAOrCC,IAPqC,CAOhC,IAPgC,CAAvC;AAQH;AA/BmB,CAAT,CAAf;AAkCAC,MAAM,CAACC,OAAP,GAAiBjC,QAAjB","sourceRoot":"/","sourcesContent":["/*游戏配置文件获取*/\r\nvar Room = require('room');\r\nconst consts = require('./model/consts');\r\nvar RoomGame = cc.Class({\r\n    extends: Room,\r\n\r\n    statics: {\r\n        create: function (data) {\r\n            let roomObj = new RoomGame();\r\n            roomObj.initWithData(data);\r\n            return roomObj;\r\n        }\r\n    },\r\n    initWithData: function (data) {\r\n        this._super(data.room);\r\n        //录屏路径\r\n        this.videoPath = '';\r\n        //获取录屏的系统时间\r\n        this.screenTime = 0;\r\n        this.gameConfigData = {};\r\n        this.wordRid = '';\r\n        this.configSuccess2 = false;\r\n        let url = consts.HTTP_GET_PAAS_DATA_SERVER+\"?gameId=\"+consts.GAME_ID+\"&plat=\"+appGame.platform\r\n           +\"&version=\"+appGame.packageVersion+\"&brand=\"+''+\"&from=game\";\r\n        //url = 'https://cs.snmi.cn/game/GetGameValue?gameId=50&plat=baidu&version=1.0.0&brand=&from=game'\r\n        console.log(\"ad url===\"+url)\r\n        util.getUrlSerConfig(url,'json','game',function(data){\r\n            this.gameConfigData = data;\r\n            console.log(\"game ==\"+JSON.stringify(this.gameConfigData))\r\n            this.configSuccess2 = true;\r\n            if(this.configSuccess2 && this.configSuccess1){\r\n                appGame.gameServerRoom.emit(consts.CLIENT_GAME_START,{});\r\n            }\r\n        }.bind(this));\r\n    },\r\n});\r\n\r\nmodule.exports = RoomGame;\r\n"]}