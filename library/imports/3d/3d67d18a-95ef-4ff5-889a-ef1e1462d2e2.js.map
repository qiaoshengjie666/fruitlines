{"version":3,"sources":["assets\\gameComon\\screenRecord\\screenShareAuto.js"],"names":["recorder","videoPathGame","cc","Class","Component","properties","onLoad","node","on","Node","EventType","TOUCH_END","shareBtnCallBack","sys","platform","BYTEDANCE_GAME","active","onDestroy","event","console","log","appGame","isClick","screenPath","emitter","emit","consts","LOCAL_EVENT_POPUP_LOADTIP","content","tt","shareAppMessage","channel","title","HTTP_RECORD_PACKAGENAME","imageUrl","query","extra","videoPath","videoTopics","success","fail","e","start"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,QAAJ;AACA,IAAIC,aAAJ;AACAC,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE,EAHP;AAML;AAEAC,EAAAA,MARK,oBAQK;AACN,SAAKC,IAAL,CAAUC,EAAV,CAAaN,EAAE,CAACO,IAAH,CAAQC,SAAR,CAAkBC,SAA/B,EAAyC,KAAKC,gBAA9C,EAA+D,IAA/D;;AACA,QAAGV,EAAE,CAACW,GAAH,CAAOC,QAAP,IAAmBZ,EAAE,CAACW,GAAH,CAAOE,cAA7B,EAA4C;AACxC,WAAKR,IAAL,CAAUS,MAAV,GAAmB,IAAnB;AACH,KAFD,MAEK;AACD,WAAKT,IAAL,CAAUS,MAAV,GAAmB,KAAnB;AACH;AACJ,GAfI;AAiBLC,EAAAA,SAjBK,uBAiBM,CACV,CAlBI;AAoBLL,EAAAA,gBApBK,4BAoBYM,KApBZ,EAoBkB;AACnBC,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA8BC,OAAO,CAACC,OAAtC;;AACA,QAAGD,OAAO,CAACE,UAAR,IAAoB,IAApB,IAA2BF,OAAO,CAACC,OAAR,IAAmB,KAAjD,EAAuD;AAEnDD,MAAAA,OAAO,CAACG,OAAR,CAAgBC,IAAhB,CAAqBC,MAAM,CAACC,yBAA5B,EAAuD;AACnDC,QAAAA,OAAO,EAAE;AAD0C,OAAvD;AAGA;AACH;;AACD,QAAG1B,EAAE,CAACW,GAAH,CAAOC,QAAP,IAAmBZ,EAAE,CAACW,GAAH,CAAOE,cAA7B,EAA4C;AAAE;AAC1CI,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAsBC,OAAO,CAACE,UAA9B;AACAM,MAAAA,EAAE,CAACC,eAAH,CAAmB;AACfC,QAAAA,OAAO,EAAE,OADM;AAEfC,QAAAA,KAAK,EAAEN,MAAM,CAACO,uBAFC;AAGfC,QAAAA,QAAQ,EAAE,EAHK;AAIfC,QAAAA,KAAK,EAAE,EAJQ;AAKfC,QAAAA,KAAK,EAAE;AACPC,UAAAA,SAAS,EAAEhB,OAAO,CAACE,UADZ;AACwB;AAC/Be,UAAAA,WAAW,EAAE,CAAC,WAASZ,MAAM,CAACO,uBAAhB,GAAwC,KAAzC;AAFN,SALQ;AASfM,QAAAA,OATe,qBASL;AACNpB,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACH,SAXc;AAYfoB,QAAAA,IAZe,gBAYVC,CAZU,EAYP;AAEJpB,UAAAA,OAAO,CAACG,OAAR,CAAgBC,IAAhB,CAAqBC,MAAM,CAACC,yBAA5B,EAAuD;AACnDC,YAAAA,OAAO,EAAE;AAD0C,WAAvD;AAGH;AAjBc,OAAnB;AAmBH;AACJ,GAnDI;AAqDLc,EAAAA,KArDK,mBAqDI,CAER,CAvDI,CAwDL;;AAxDK,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\nvar recorder;\r\nvar videoPathGame;\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.node.on(cc.Node.EventType.TOUCH_END,this.shareBtnCallBack,this);\r\n        if(cc.sys.platform == cc.sys.BYTEDANCE_GAME){\r\n            this.node.active = true;\r\n        }else{\r\n            this.node.active = false;\r\n        }\r\n    },\r\n\r\n    onDestroy(){\r\n    },\r\n\r\n    shareBtnCallBack(event){\r\n        console.log(\"appGame.isClick\",appGame.isClick)\r\n        if(appGame.screenPath==null|| appGame.isClick == false){\r\n            \r\n            appGame.emitter.emit(consts.LOCAL_EVENT_POPUP_LOADTIP, {\r\n                content: \"录屏时间太短！！！\"\r\n            });\r\n            return;\r\n        }\r\n        if(cc.sys.platform == cc.sys.BYTEDANCE_GAME){ //头条平台\r\n            console.log(\"头条平台===\",appGame.screenPath)\r\n            tt.shareAppMessage({\r\n                channel: 'video',\r\n                title: consts.HTTP_RECORD_PACKAGENAME,\r\n                imageUrl: '',\r\n                query: '',\r\n                extra: {\r\n                videoPath: appGame.screenPath, // 可用录屏得到的视频地址\r\n                videoTopics: ['大家一起来玩'+consts.HTTP_RECORD_PACKAGENAME+'！！！']\r\n                },\r\n                success() {\r\n                    console.log('分享视频成功');\r\n                },\r\n                fail(e) {\r\n               \r\n                    appGame.emitter.emit(consts.LOCAL_EVENT_POPUP_LOADTIP, {\r\n                        content: \"分享视频失败\"\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}