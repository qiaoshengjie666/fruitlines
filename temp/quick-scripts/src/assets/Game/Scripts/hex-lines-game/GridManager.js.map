{"version":3,"sources":["assets\\Game\\Scripts\\hex-lines-game\\GridManager.ts"],"names":[],"mappings":";;;;;AAAA,sCAAiC;AACjC,+BAA8B;AAC9B,6BAA0B;AAE1B;IAAyC,+BAAY;IAArD;QAAA,qEAmGC;QA/FG,aAAO,GAAG,IAAI,CAAC;;IA+FnB,CAAC;IA7FG,6BAAO,GAAP,UAAQ,CAAC,EAAE,CAAC,EAAE,CAAC;QACX,IAAI,IAAI,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,gBAAM,CAAC,CAAA;QACvD,IAAG,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;YACxB,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,gBAAM,CAAC,CAAA;QACrC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IACnC,CAAC;IAED,0BAAI,GAAJ,UAAK,CAAC;QAEF,IAAI,CAAC,OAAO,GAAG,CAAC,CAAA;IACpB,CAAC;IAED,2BAAK,GAAL;QACI,IAAI,CAAC,GAAG,cAAQ,CAAC,QAAQ,CAAC,SAAS,CAAA;QACnC,IAAI,CAAC,GAAG,cAAQ,CAAC,QAAQ,CAAC,SAAS,CAAA;QACnC,IAAI,CAAC,SAAS,GAAG,IAAI,gBAAM,CAAC;QAC5B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GACrB;YACI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG;gBACjG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAA;gBACX,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,kBAAkB,EAAE,CAAA;gBACpC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,kBAAkB,EAAE,CAAA;gBACxC,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;gBAC9C,IAAI,IAAI,GAAG,EAAE,CAAC,WAAW,CAAC,OAAC,CAAC,MAAM,CAAC,CAAA;gBACnC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;gBACpB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;gBACpB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC;gBACxB,IAAI,CAAC,MAAM,GAAG,GAAG,CAAA;gBACjB,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAA;aACvC;SACJ;QACD,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC;YAC5B,KAAK,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GACxF;gBACI,CAAC,GAAG,CAAC,EAAG,CAAA;gBACR,KAAK,IAAI,GAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAC,EAAC,GAAC,EAAE,EAAE;oBACvB,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,kBAAkB,EAAE,CAAA;oBACpC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,GAAC,CAAC,CAAC,kBAAkB,EAAE,CAAA;oBAC5C,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;oBAC3C,IAAI,IAAI,GAAG,IAAI,CAAC;oBAChB,IAAG,GAAC,IAAI,CAAC,EACT;wBAEI,IAAI,GAAG,EAAE,CAAC,WAAW,CAAC,OAAC,CAAC,MAAM,CAAC,CAAA;qBAClC;yBAAI;wBACD,IAAI,GAAG,EAAE,CAAC,WAAW,CAAC,OAAC,CAAC,MAAM,CAAC,CAAA;qBAClC;oBACD,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;oBACpB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;oBACpB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC;oBACxB,IAAI,CAAC,MAAM,GAAG,GAAG,CAAA;oBACjB,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,GAAC,EAAE,IAAI,CAAC,CAAA;iBAC3C;aACJ;QACL,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC;YAC5B,KAAK,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GACvG;gBACI,CAAC,GAAG,CAAC,EAAE,CAAA;gBACP,KAAK,IAAI,CAAC,GAAI,CAAC,EAAE,CAAC,GAAG,CAAC,EAAC,CAAC,EAAE,EAC1B;oBACI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,kBAAkB,EAAE,CAAA;oBAChC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,kBAAkB,EAAE,CAAA;oBACxC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;oBAC3C,IAAI,IAAI,GAAG,IAAI,CAAC;oBAChB,IAAG,CAAC,IAAI,CAAC,EACT;wBACI,IAAI,GAAG,EAAE,CAAC,WAAW,CAAC,OAAC,CAAC,MAAM,CAAC,CAAA;qBAClC;yBAAI;wBAED,IAAI,GAAG,EAAE,CAAC,WAAW,CAAC,OAAC,CAAC,MAAM,CAAC,CAAA;qBAClC;oBACD,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;oBACpB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;oBACpB,IAAI,CAAC,MAAM,GAAG,GAAG,CAAA;oBACjB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC;oBAExB,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAA;iBAC3C;aACJ;IAET,CAAC;IAED,8BAAQ,GAAR,UAAS,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;QACpB,IAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,EAChC;YACI,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAA;YAClC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,EACpB;gBACI,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAA;gBACxB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;aACnB;SACJ;IACL,CAAC;IACL,kBAAC;AAAD,CAnGA,AAmGC,CAnGwC,EAAE,CAAC,SAAS,GAmGpD","file":"","sourceRoot":"/","sourcesContent":["import IntMap from \"./ds/IntMap\";\nimport LineGame from \"./Game\";\nimport { R } from \"./Res\";\n\nexport default class GridManager extends cc.Component\n{\n    _gridList:IntMap\n\n    _minCol = null;\n\n    addGrid(t, e, n) {\n        null == this._gridList && (this._gridList = new IntMap)\n        if(!this._gridList.exists(t))\n            this._gridList.set(t, new IntMap)\n        this._gridList.get(t).set(e, n)\n    }\n\n    init(t)\n    {\n        this._minCol = t\n    }\n\n    start() {\n        var t = LineGame.instance._rowCount\n        var e = LineGame.instance._tileList\n        this._gridList = new IntMap;\n        for (var n = 0; t > n;)\n        {\n            for (var i = n++, s = 0, a = (t / 2 >= i ? this._minCol + i : this._minCol - 1 + t - i) - 1; a > s;) {\n                var r = s++\n                var o = e[i][r].get_borderPosition()\n                var b = e[i][r + 1].get_borderPosition()\n                var c = cc.v2((o.x + b.x) / 2,(o.y + b.y) / 2)\n                let line = cc.instantiate(R.Line46)\n                line.setPosition(c);\n                line.active = false;\n                line.parent = this.node;\n                line.zIndex = 109\n                this.addGrid(i + i, r + r + 1, line)\n            }\n        }\n        for (n = 0, i = t / 2 | 0; i > n;)\n            for (s = n++, a = t / 2 >= s ? this._minCol + s : this._minCol - 1 + t - s, r = 0; a > r;)\n            {\n                o = r ++\n                for (let m = 0; 2 > m;m++) {\n                    var h = e[s][o].get_borderPosition()\n                    var u = e[s + 1][o + m].get_borderPosition()\n                    h = cc.v2((h.x + u.x) / 2, (h.y + u.y) / 2)\n                    let line = null;\n                    if(m == 0)\n                    {\n                        \n                        line = cc.instantiate(R.Line37)\n                    }else{\n                        line = cc.instantiate(R.Line19)\n                    }\n                    line.setPosition(h);\n                    line.active = false;\n                    line.parent = this.node;\n                    line.zIndex = 109\n                    this.addGrid(s + s + 1, o + o + m, line)\n                }\n            }\n        for (n = 0, i = t / 2 | 0; i > n;)\n            for (s = n++, s = t - s - 1, a = t / 2 >= s ? this._minCol + s : this._minCol - 1 + t - s, r = 0; a > r;)\n            {\n                o = r++\n                for (var m  = 0; 2 > m;m++) \n                {\n                    h = e[s][o].get_borderPosition()\n                    u = e[s - 1][o + m].get_borderPosition()\n                    h = cc.v2((h.x + u.x) / 2, (h.y + u.y) / 2)\n                    let line = null;\n                    if(m == 0)\n                    {\n                        line = cc.instantiate(R.Line19)\n                    }else{\n                        \n                        line = cc.instantiate(R.Line37)\n                    }\n                    line.setPosition(h);\n                    line.active = false;\n                    line.zIndex = 109\n                    line.parent = this.node;\n\n                    this.addGrid(s + s - 1, o + o + m, line)\n                }\n            }\n                \n    }\n\n    setState(r, c, r1, c1, b) {\n        if(this._gridList.exists(r + r1))\n        {\n            let t = this._gridList.get(r + r1)\n            if (t.exists(c + c1))\n            {\n                let node = t.get(c + c1)\n                node.active = b;\n            }\n        }\n    }\n}"]}