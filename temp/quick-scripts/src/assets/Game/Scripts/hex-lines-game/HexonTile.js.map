{"version":3,"sources":["assets\\Game\\Scripts\\hex-lines-game\\HexonTile.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Consts from \"./Consts\";\nimport LineGame from \"./Game\";\nimport { R } from \"./Res\";\n\nconst {ccclass, property} = cc._decorator;\n\nenum TileType\n{\n    Empty,\n    Type1,\n    Type2,\n    Type3,\n    Type4,\n    Type5,\n    Type6,\n    Type7\n}\n\n\n@ccclass\nexport default class HexonTile extends cc.Component {\n    _col: number = 0;\n    _row:number = 0;\n    _animal:number = 0;\n    isChangable = true;\n    _isConnecting = false;\n    \n    connectedTile = null;\n    reverseConnectedTile = null;\n    targetTile = null;\n\n    @property({type:cc.Sprite,visible:true,displayName:\"Animal Sprite\"})\n    _sprite:cc.Sprite = null;\n\n    @property({type:cc.Sprite,visible:true,displayName:\"Base Sprite\"})\n    _baseSprite = null;\n\n    animalSprite = null;\n\n\n    _tileType = 0;\n\n    get_col() {\n        return this._col\n    }\n    set_col(t) {\n        return this._col = t,\n            t = this._col - (this._row <= LineGame.instance._rowCount / 2 ? LineGame.instance.get_minCol() + this._row: LineGame.instance.get_minCol() - 1 + LineGame.instance._rowCount - this._row) / 2 + .5,\n            this._baseSprite.node.x = (Consts.CenterX + t * Consts.ColSize),\n            this._col\n    }\n    get_row() {\n        return this._row\n    }\n    set_row(t) {\n        this._row = t\n        this._baseSprite.node.y = (Consts.CenterY + (this._row - (LineGame.instance._rowCount / 2 | 0)) * Consts.RowSize)\n        return this._row\n    }\n    get_borderPosition() {\n        return this._baseSprite.node.position\n        // return cc.v2(this._baseSprite.node.x._value, this._baseSprite.node.y._value)\n    }\n    get_isConnecting() {\n        return this._isConnecting\n    }\n    set_isConnecting(t) {\n        return this._isConnecting = t, this.set_tileType(this._tileType), this._isConnecting\n    }\n    get_animal() {\n        return this._animal\n    }\n    set_animal(t) {\n        switch (this._animal = t, t) {\n            case 1:\n                this.set_tileType(TileType.Type1);\n                break;\n            case 2:\n                this.set_tileType(TileType.Type2);\n                break;\n            case 3:\n                this.set_tileType(TileType.Type3);\n                break;\n            case 4:\n                this.set_tileType(TileType.Type4);\n                break;\n            case 5:\n                this.set_tileType(TileType.Type5);\n                break;\n            case 6:\n                this.set_tileType(TileType.Type6);\n                break;\n            case 7:\n                this.set_tileType(TileType.Type7);\n                break;\n            default:\n                this.set_tileType(TileType.Empty)\n        }\n        return this._animal\n    }\n    \n    getTileTexture(t, e, n) {\n        if(t == 0 )\n        {\n            return R.tileTextures[0]\n        }else{\n            // return e ? R.tileTextures[t] : 1 == n ? R.tileTextures[14 + t] : R.tileTextures[7 + t]\n            let idx = 0\n            if(e)\n            {\n                idx = t\n            }else{\n                if (n){\n                    idx = 14 +t \n                }else{\n                    idx = 7 + t;\n                }\n            }\n            return R.tileTextures[idx];\n        }\n    }\n\n\n    set_tileType(t:number) {\n        this._tileType = t\n        // if (null == this._baseSprite )\n        // {\n        //     // this._baseSprite = new Y\n        //     // this._baseSprite.setAnchor(42, 42)\n        //     // this.owner.add(this._baseSprite)\n        // }\n        // if (null == this._sprite )\n        // {\n        //     // this._sprite = new J(jn.Instance.getTileTexture(this.get_animal(), !1, !1))\n        //     // this.owner.addChild((new g).add(this._sprite))\n        // } \n        if (this.isChangable && this.get_isConnecting() ) \n        {\n            this._baseSprite.spriteFrame = this.getTileTexture(this.get_animal(),true, false) \n        }else{\n            let tailTile = this.getTail()\n            let sp \n            if ( !this.isChangable && null != this.reverseConnectedTile ) \n            {\n                sp = this.getTileTexture(this.get_animal(), false, true)\n            }else{\n                if( null == tailTile || tailTile.isChangable)\n                {\n                    sp = this.getTileTexture(this.get_animal(), false, false) \n                }else{\n                    sp = this.getTileTexture(this.get_animal(), false, true)\n                }\n            }\n            this._baseSprite.spriteFrame = sp\n        }\n        return this._tileType;\n    }\n    onAdded() {\n        this.set_tileType(TileType.Empty)\n    }\n    connect(t) {\n        null == t ? null != this.connectedTile && (1 == this.connectedTile.isChangable && this.connectedTile.set_animal(0), this.connectedTile.connect(null), this.connectedTile = this.connectedTile.reverseConnectedTile = null) : (this.connectedTile = t, t.set_animal(this.get_animal()), t.reverseConnectedTile = this)\n    }\n    getTail() {\n        for (var t = this.connectedTile, e = null; null != t;) e = t, t = t.connectedTile;\n        return e\n    }\n    getHead() {\n        for (var t = this.reverseConnectedTile, e = null; null != t;) e = t, t = t.reverseConnectedTile;\n        return e\n    }\n    equals(t) {\n        return null == t ? !1 : this.get_row() == t.get_row() && this.get_col() == t.get_col()\n    }\n\n    start () {\n\n    }\n\n\n\n    // update (dt) {}\n}\n"]}