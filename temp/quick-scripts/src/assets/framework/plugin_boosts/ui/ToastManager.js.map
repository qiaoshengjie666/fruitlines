{"version":3,"sources":["assets\\framework\\plugin_boosts\\ui\\ToastManager.ts"],"names":[],"mappings":";;;;;;AAAA,mDAA8C;AAExC,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAE/B,QAAA,KAAK,GAAgB,IAAI,CAAC;AAGrC;IAA0C,gCAAY;IAAtD;;IAoDA,CAAC;IA/CG,4BAAK,GAAL;QACI,IAAI,CAAC,SAAS,GAAG,IAAI,EAAE,CAAC,QAAQ,EAAE,CAAC;QACnC,aAAK,GAAG,IAAI,CAAC;IACjB,CAAC;IAED,gCAAS,GAAT;QAEI,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;IAC3B,CAAC;IAED,2BAAI,GAAJ,UAAK,IAAI,EAAC,GAAS;QAAT,oBAAA,EAAA,SAAS;QAEf,aAAa;QACb,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;QAChC,IAAI,SAAS,GAAG,IAAI,CAAC;QACrB,IAAI,IAAI,IAAI,IAAI,EAChB;YACI,IAAI,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACnC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,wBAAc,CAAC,CAAC;YAC9C,IAAG,SAAS,IAAI,IAAI,EACpB;gBACI,OAAO,CAAC,IAAI,CAAC,wDAAwD,CAAC,CAAA;aACzE;YACD,oCAAoC;YACpC,uCAAuC;SAC1C;aAAI;YACD,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,wBAAc,CAAC,CAAC;SACjD;QACD,IAAG,IAAI,CAAC,MAAM,IAAI,IAAI;YAClB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAC,KAAK,CAAC,CAAC;QAEnC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAC,IAAI,EAAC,GAAG,CAAC,CAAA;QAC7B,OAAO,SAAS,CAAC;IACrB,CAAC;IAEO,2BAAI,GAAZ,UAAa,SAAwB,EAAC,IAAI,EAAC,GAAG;QAA9C,iBASC;QAPG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;QACpB,IAAI,CAAC,YAAY,CAAC,UAAA,CAAC;YACf,SAAS,CAAC,IAAI,CAAC,UAAA,CAAC;gBACZ,KAAI,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA;gBAClC,OAAO,CAAC,GAAG,CAAC,4BAA4B,EAAC,KAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,CAAA;YACnE,CAAC,CAAC,CAAC;QACP,CAAC,EAAC,GAAG,CAAC,CAAA;IACV,CAAC;IA9CD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;gDACJ;IAHC,YAAY;QADhC,OAAO;OACa,YAAY,CAoDhC;IAAD,mBAAC;CApDD,AAoDC,CApDyC,EAAE,CAAC,SAAS,GAoDrD;kBApDoB,YAAY","file":"","sourceRoot":"/","sourcesContent":["import ToastComponent from \"./ToastComponent\";\n\nconst {ccclass, property} = cc._decorator;\n\nexport var Toast:ToastManager = null;\n\n@ccclass\nexport default class ToastManager extends cc.Component {\n    toastPool:cc.NodePool;\n    @property(cc.Prefab)\n    prefab:cc.Prefab\n    \n    start () {\n        this.toastPool = new cc.NodePool();\n        Toast = this;\n    }\n\n    onDestroy()\n    {\n        this.toastPool.clear();\n    }\n\n    make(text,dur = 1.3)\n    {\n        //show toast \n        let node = this.toastPool.get();\n        let toastComp = null;\n        if (node == null)\n        {\n            node = cc.instantiate(this.prefab);\n            toastComp = node.getComponent(ToastComponent);\n            if(toastComp == null)\n            {\n                console.warn(\"Toast.make : Toast Prefab must contains ToastComponent\")\n            }\n            // ToastManager.toastPool.put(node);\n            // node = ToastManager.toastPool.get();\n        }else{\n            toastComp = node.getComponent(ToastComponent);\n        }\n        if(node.parent == null)\n            this.node.addChild(node,99999);\n        \n        this.show(toastComp,text,dur)\n        return toastComp;\n    }\n\n    private show(toastComp:ToastComponent,text,dur)\n    {\n        toastComp.show(text)\n        this.scheduleOnce(_=>{\n            toastComp.hide(_=>{\n                this.toastPool.put(toastComp.node)\n                console.log(\"Toast.hide toastpool size:\",this.toastPool.size())\n            });\n        },dur)\n    }\n\n    // update (dt) {}\n}\n"]}