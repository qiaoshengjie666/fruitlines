{"version":3,"sources":["assets\\framework\\plugin_boosts\\ui\\ViewManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import View from \"./View\";\nimport { Toast } from \"./ToastManager\";\n\nconst {ccclass, property} = cc._decorator;\n\nvar TAG:string = \"[ViewManager]\"\n@ccclass\nexport default class ViewManager extends cc.Component {\n\n    // LIFE-CYCLE CALLBACKS:\n    static instance:ViewManager;\n    // onLoad () {}\n\n    // baseDir:string = \"assets/\"\n\n    _views:{[index:string]:View} = {}\n\n// \n    @property(cc.Node)\n    modal:cc.Node = null;\n\n    @property\n    modalOpacity:number = 160;\n\n\n    onLoad()\n    {\n        ViewManager.instance = this;\n        this.modal.active = false;\n        this.modal.zIndex = 999;\n        //g.setGlobalInstance(this);\n        // cc.game.addPersistRootNode(this.node);\n        // this.node.getComponent(cc.Widget).target = cc.find(\"Canvas\")\n    }\n\n    onEnable()\n    {\n        \n    }\n\n    onDestroy()\n    {\n        // cc.game.removePersistRootNode(this.node);\n        for(var key in this._views){\n            delete this._views[key];\n        }\n    }\n\n    start () {\n        //load prefab\n        \n        // this.modal.active = false;\n        // this.sprite = this.getComponent(cc.Sprite)\n        // this.modal.zIndex = 999;\n    }\n    private getVisibleDialog()\n    {\n        for(var name in this._views)\n        {\n            let view = this._views[name]\n            if(view.isDialog)\n            {\n                if (this.isVisible(name))\n                {\n                    return view;\n                }\n            }    \n        }\n        return null;\n    }\n\n    private hasVisibleDialog()\n    {\n        for(var name in this._views)\n        {\n            let view = this._views[name]\n            if(view.isDialog)\n            {\n                if (this.isVisible(name))\n                {\n                    return true\n                }\n            }    \n        }\n        return false;\n    }\n\n    public isVisible(viewname)\n    {\n        let view = null;\n        if (typeof(viewname) == \"string\")\n            view = this._views[viewname]\n        else\n            view = viewname;\n        //todo check type \n        if (view)\n        {\n            return view.node.active;\n        }\n        return false\n    }\n\n    private attachViewComp(existingView:cc.Node):View\n    {\n        let viewComp = null;\n        if(viewComp == null|| viewComp == undefined)\n        {\n            viewComp = existingView.getComponent(View);\n            if(viewComp == null)\n            {\n                viewComp = existingView.addComponent(View);\n                viewComp.init(existingView.name);\n            }\n            this._views[existingView.name] = viewComp;\n        }\n        return viewComp;\n    }\n\n    private showView(view,...params)\n    {\n        this.modal.active = view.isDialog;\n        //check has popuped dialog and  all currentview is dialog show modal forcely.\n        if (this.hasVisibleDialog() || view.isDialog)\n        {\n            this.modal.active =  true;            \n        }\n        if (view.isDialog)\n        {\n            this.modal.opacity = view.opacity;\n        }\n        return view.show(...params);\n    }\n\n    showFromPrefab(prefab:cc.Prefab,prefabPath:string ,...params)\n    {\n        let view = this._views[prefabPath];\n        if(view == null)\n        {\n            let node = cc.instantiate(prefab)\n            view = node.getComponent(View)\n            if(view == null)\n            {\n                view = node.addComponent(View);\n                view.isDialog = true;\n                //default is dialog\n            }\n            let widget = view.getComponent(cc.Widget);\n            if(widget)\n                widget.target = cc.find(\"Canvas\")\n            view.init(prefabPath);\n            this._views[prefabPath] = view;\n            if(view.isDialog)\n            {\n                this.node.addChild(node,1000);\n            }else{\n                this.node.addChild(node,1000);\n            }\n            // g.foreachNode(view.node,this.updateWidgets,this)\n        }\n        // node = view.node;\n        this.node.color.setA(255);\n        console.log(TAG,\"show view:\" + prefabPath )\n        return this.showView(view,...params);\n    }\n\n    showFromPrefabPath(prefabPath:string,...params)\n    {\n        let view = this._views[prefabPath]\n        if(view == null ||view == undefined)\n        {\n            console.log(\"start load prefab:\" +prefabPath)\n            let beforeTime = new Date().getTime();\n            cc.loader.loadRes(prefabPath,cc.Prefab,(e,prefab:cc.Prefab) =>{\n                console.log(TAG,\"prefab loaded : \"+ prefabPath +\" \"+  (new Date().getTime() - beforeTime) +\"ms\")\n                this.showFromPrefab(prefab,prefabPath,...params);\n            }) \n        }else{\n            // this.sprite.enabled = false;\n            this.modal.active = view.isDialog;\n            if (this.hasVisibleDialog() || view.isDialog)\n            {\n                this.modal.active =  true;     \n                this.modal.opacity = view.opacity;       \n            }\n            console.log(TAG,\"show view:\" + prefabPath ,params)\n            // let viewnode = view.node;\n            // view.node.x = 0;\n            // view.node.y = 0;\n            return  view.show(...params);\n        }\n    }\n\n    preload(prefabPath:string)\n    {\n        let view = this._views[prefabPath]\n        if(view == null ||view == undefined)\n        {\n            cc.loader.loadRes(prefabPath,cc.Prefab,(e,prefab:cc.Prefab) =>{\n                console.log(TAG,\"preload view\"+ prefabPath)\n                let node = cc.instantiate(prefab)\n                view = node.getComponent(View);\n                let widget = view.getComponent(cc.Widget);\n                if(widget)\n                    widget.target = cc.find(\"Canvas\")\n                view.init(prefabPath);\n                this._views[prefabPath] = view;\n                // this.scheduleOnce(_=>node.active = false,0);\n                if (view.isDialog)\n                {\n                    this.node.addChild(node,1000);\n                }else{\n                    this.node.addChild(node,1000);\n                }\n                view.hide();\n            }) \n        }else{\n        }\n    }\n\n    // will enableTouch next show up\n    disableTouch(viewNode)\n    {\n        let view = viewNode.getComponent(View)\n        if(view)\n        {\n            view.touchEnabled = false;\n        }\n    }\n\n    enableTouch(viewNode)\n    {\n        let view = viewNode.getComponent(View)\n        if(view)\n        {\n            view.touchEnabled = true;\n        }\n    }\n\n\n    show(view, ...params)\n    {\n        // disable current view 's touch  \n        if (typeof(view) == \"string\")\n        {\n            return this.showFromPrefabPath(view,...params);\n        }\n        else{\n            if (view == null|| view == undefined)  return;\n            if(view.node) view = view.node;\n            let v = this.attachViewComp(view)\n            return this.showView(v,...params);\n        }\n    }\n\n\n    hide(viewname,playHideAnim = true)\n    {\n        if(typeof(viewname) != \"string\")\n        {\n            // get view name \n            if (viewname == null|| viewname == undefined) return;\n            this.attachViewComp(viewname)\n            viewname = viewname.name;\n        }\n        let view = this._views[viewname]\n        if(view != null && view != undefined)\n        {\n            view.node.active = false;\n            if (view.isDialog ){\n                //todo: should support dialog hide animtion  later \n                this.modal.active = false;\n            }\n            if(this.hasVisibleDialog())\n            {\n                this.modal.active = true;\n            }\n            // if(view.isInHideAnimation())\n            //     return;\n            // view.hide();\n            if(playHideAnim )\n                view.doHideAnimation();\n            view.onHidden();\n        }\n    }\n\n    checkViewStacks()\n    {\n        let dialog = this.getVisibleDialog()\n        if(dialog)\n        {\n            this.modal.active = true;\n            this.modal.opacity = dialog.opacity;\n        }\n    }\n\n    hideAll()\n    {\n        for (var viewname in this._views){\n            // let view = this._views[viewname]\n            this.hide(viewname);\n        }\n    }\n\n    // update (dt) {}\n}\n"]}