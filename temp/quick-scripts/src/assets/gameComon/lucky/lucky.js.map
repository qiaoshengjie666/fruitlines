{"version":3,"sources":["assets\\gameComon\\lucky\\lucky.js"],"names":["unsealtimeOut","bannerTimeOut","cc","Class","Component","properties","touchHide","Node","touch","leftBtn","rightBtn","unsealBtn","Button","closeBtn","getBtn","redDragon","dragonBones","ArmatureDisplay","infoLabel","Label","itemReward","redLabel","openTouch","unsealBtnCallback","closeBtnCallback","redBagBtnCallback","blankCallback","getRewardCallBack","onLoad","on","EventType","TOUCH_END","clickTouchHideCallBack","TOUCH_START","onTouchStart","onTouchEnd","active","onLeftTouchEnd","onRightTouchEnd","node","clickTouchCloseCallBack","onUnsealTouchEnd","onGetTouchEnd","addEventListener","EventObject","COMPLETE","animationEventHandler","string","currentIndex","show","opts","config","luckyConfig","info","unsealCB","closeCB","redbagCB","blankCB","rewardCB","showRefreshUI","isResult","onDestroy","showType","httpUtils","httpPost","consts","HTTP_RECORD_SERVER","title","content","level","tollgateConfig","appGame","gameServerRoom","commonConfig","luckytollgate","i","length","index","ready","sys","localStorage","getItem","setItem","refreshItem","setTimeout","interstitialAd","playAd","banner","playBanner","bind","appBoxAd","playBox","blockAd","playBlockad","underscore","each","key","value","unseal","playAnimation","refreshGetReward","event","desc","onoff","luckyOnOff","video","videoBanner","playVideoAd","force","isSuc","console","log","onClientResultPlayAD","sceneId","eventId","isSuccess","startX","getLocation","x","moveX","spaceX","onRedBagTouchEnd","emitter","emit","LOCAL_EVENT_POPUP_LOADTIP","hide","enter","reward","itemId","count","getChildByName","getComponent","init","tempIndex","seal","isHad","receive","removeItem","interactable","off","scale","runAction","repeatForever","sequence","scaleTo","sealShow","luckUnseal","time","delay","type","animationState","name","data","clearTimeout","removeFromParent","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["var unsealtimeOut;\r\nvar bannerTimeOut;\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        touchHide:cc.Node,\r\n        touch:cc.Node,\r\n        leftBtn:cc.Node,\r\n        rightBtn:cc.Node,\r\n        unsealBtn:cc.Button, //前往关卡\r\n        closeBtn:cc.Button,\r\n        getBtn:cc.Button,\r\n        redDragon:dragonBones.ArmatureDisplay,\r\n        infoLabel:cc.Label,\r\n        itemReward:cc.Node,\r\n        redLabel:cc.Label,\r\n        openTouch:cc.Node,\r\n        unsealBtnCallback: null,\r\n        closeBtnCallback: null,\r\n        redBagBtnCallback: null,\r\n        blankCallback:null,\r\n        getRewardCallBack:null\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.touchHide.on(cc.Node.EventType.TOUCH_END, this.clickTouchHideCallBack, this);\r\n        this.touch.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\r\n        this.touch.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\r\n        this.openTouch.active = false;\r\n\r\n        this.leftBtn.on(cc.Node.EventType.TOUCH_END, this.onLeftTouchEnd, this);\r\n        this.rightBtn.on(cc.Node.EventType.TOUCH_END, this.onRightTouchEnd, this);\r\n\r\n        this.unsealBtn.node.active = false;\r\n        this.getBtn.node.active = false;\r\n        this.closeBtn.node.active = false;\r\n        this.closeBtn.node.on(cc.Node.EventType.TOUCH_END, this.clickTouchCloseCallBack, this);\r\n        this.unsealBtn.node.on(cc.Node.EventType.TOUCH_END, this.onUnsealTouchEnd, this);\r\n        this.getBtn.node.on(cc.Node.EventType.TOUCH_END, this.onGetTouchEnd, this);\r\n\r\n        this.redDragon.addEventListener(dragonBones.EventObject.COMPLETE, this.animationEventHandler, this);\r\n        this.infoLabel.string = '';\r\n        this.currentIndex = 1;\r\n        this.itemReward.active = false;\r\n    },\r\n    /** \r\n     * @param opts\r\n     * backCB 放弃按钮回调\r\n     * reviveCB 复活按钮回调\r\n     */\r\n    show(opts){\r\n        opts = opts || {};\r\n        if(opts.config){\r\n            this.luckyConfig = opts.config;\r\n        }\r\n        if(opts.info){\r\n            this.info = opts.info;\r\n        }\r\n        if(opts.unsealCB){\r\n            this.unsealBtnCallback = opts.unsealCB;\r\n        }\r\n        if(opts.closeCB){\r\n            this.closeBtnCallback = opts.closeCB;\r\n        }\r\n        if(opts.redbagCB){\r\n            this.redBagBtnCallback = opts.redbagCB;\r\n        }\r\n        if(opts.blankCB){\r\n            this.blankCallback = opts.blankCB;\r\n        }\r\n        if(opts.rewardCB){\r\n            this.getRewardCallBack = opts.rewardCB;\r\n        }\r\n        this.currentIndex = 1;\r\n        this.showRefreshUI(this.info.isResult);\r\n    },\r\n\r\n    onDestroy(){\r\n    },\r\n\r\n    showRefreshUI(showType){\r\n        httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'幸运大奖',content:'打开幸运大奖界面'},function(){\r\n        });\r\n        this.currentIndex = 1;\r\n        this.level = this.info.level||1;\r\n        //this.tollgateConfig = this.luckyConfig.tollgate;\r\n        this.tollgateConfig = appGame.gameServerRoom.commonConfig.luckytollgate;\r\n        if(showType==3){//是否达到等级  是否已领取\r\n            for(let i=0;i<this.tollgateConfig.length;i++){\r\n                if(this.tollgateConfig[i].level > this.level){\r\n                    break;\r\n                }else if(this.tollgateConfig[i].level <= this.level){\r\n                    let index = i+1;\r\n                    var ready = cc.sys.localStorage.getItem(\"luckReadyReceive\"+index)\r\n                    if(ready ==null || ready==''){\r\n                        cc.sys.localStorage.setItem(\"luckUnseal\"+index,index)\r\n                    }\r\n                    this.currentIndex = index;\r\n                }\r\n            }\r\n        }else if(showType==2){//结算 是否达到等级\r\n            for(let i=0;i<this.tollgateConfig.length;i++){\r\n                if(this.tollgateConfig[i].level == this.level){\r\n                    let index = i+1;\r\n                    var ready = cc.sys.localStorage.getItem(\"luckReadyReceive\"+index)\r\n                    if(ready ==null || ready==''){\r\n                        cc.sys.localStorage.setItem(\"luckUnseal\"+index,index)\r\n                        this.currentIndex = index;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }else{//点击按钮显示\r\n            for(let i=0;i<this.tollgateConfig.length;i++){\r\n                let index = i+1;\r\n                var ready = cc.sys.localStorage.getItem(\"luckReadyReceive\"+index)\r\n                if(ready ==null || ready==''){\r\n                    this.currentIndex = index;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        \r\n        this.refreshItem(this.currentIndex);\r\n        this.node.active = true;\r\n        bannerTimeOut = setTimeout(function(){\r\n            if(appGame.interstitialAd){\r\n                appGame.interstitialAd.playAd();\r\n            }\r\n            appGame.banner.playBanner(2);\r\n        }.bind(this), 3000);\r\n        appGame.appBoxAd.playBox(true);\r\n        appGame.blockAd.playBlockad(true,4);\r\n    },\r\n\r\n    refreshItem(index){\r\n        underscore.each(this.tollgateConfig,function(key,value){\r\n            if(value == index-1){\r\n                let ready = cc.sys.localStorage.getItem(\"luckReadyReceive\"+index);  //是否已经领取\r\n                let unseal = cc.sys.localStorage.getItem(\"luckUnseal\"+index);   //是否解封\r\n                if(ready!='' && ready!=null){//已经领取了\r\n                    this.redDragon.playAnimation('dajiang2',1)\r\n                    this.refreshGetReward(index,2);\r\n                }else{  //未领取\r\n                    if(unseal!='' && unseal!=null){  //已经解封\r\n                        this.redDragon.playAnimation('dajiang2',1)\r\n                        this.refreshGetReward(index,3);\r\n                    }else{ //未解封\r\n                        this.redDragon.playAnimation('dajiang',2)\r\n                        this.refreshGetReward(index,4);\r\n                    }\r\n                }\r\n            }\r\n        }.bind(this))\r\n    },\r\n\r\n    clickTouchHideCallBack(event){\r\n        httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'幸运大奖',content:'关闭空白页面',desc:'点击'},function(){\r\n        });\r\n        let onoff = this.luckyConfig.luckyOnOff;\r\n        if(onoff && onoff.length>0 && onoff[1].video == 1){\r\n            appGame.videoBanner.playVideoAd(1,onoff[1].force,function(isSuc){\r\n                console.log(\"看视频成功\")\r\n                this.onClientResultPlayAD({sceneId:7,eventId:2,isSuccess:true})\r\n                this.blankCallback&&this.blankCallback();\r\n            }.bind(this));\r\n        }else{\r\n            this.onClientResultPlayAD({sceneId:7,eventId:2,isSuccess:true});\r\n            this.blankCallback&&this.blankCallback();\r\n        }\r\n    },\r\n    clickTouchCloseCallBack(event){\r\n        httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'幸运大奖',content:'关闭按钮',desc:'点击'},function(){\r\n        });\r\n        this.onClientResultPlayAD({sceneId:7,eventId:2,isSuccess:true});\r\n        this.closeBtnCallback&&this.closeBtnCallback();\r\n    },\r\n\r\n    onTouchStart(event){\r\n        this.startX = event.getLocation().x;\r\n    },\r\n\r\n    onTouchEnd(event){\r\n        let moveX = event.getLocation().x;\r\n        let spaceX = moveX - this.startX;\r\n        if(spaceX<=-10){//向左\r\n            this.onLeftTouchEnd({})\r\n        }else if(spaceX>=10){//向右\r\n            this.onRightTouchEnd({})\r\n        }else if(this.openTouch.active){ //点击redDragon\r\n            this.onRedBagTouchEnd({});\r\n        }   \r\n    },\r\n\r\n    onLeftTouchEnd(event){\r\n        if(this.currentIndex<=1){\r\n            appGame.emitter.emit(consts.LOCAL_EVENT_POPUP_LOADTIP, {\r\n                content: \"您当前已经在第一个了！\"\r\n            });\r\n        }else{\r\n            this.currentIndex--;\r\n            this.refreshItem(this.currentIndex);\r\n        }\r\n    },\r\n\r\n    onRightTouchEnd(event){\r\n        if(this.currentIndex>=this.tollgateConfig.length){\r\n            appGame.emitter.emit(consts.LOCAL_EVENT_POPUP_LOADTIP, {\r\n                content: \"您当前已经在最后一个了！\"\r\n            });\r\n        }else{\r\n            this.currentIndex++;\r\n            this.refreshItem(this.currentIndex);\r\n        }\r\n    },\r\n    //立即挑战\r\n    onUnsealTouchEnd(event){\r\n        httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'幸运大奖',content:'前往关卡',desc:'点击'},function(){\r\n        });\r\n        this.unsealBtnCallback&&this.unsealBtnCallback();\r\n        this.hide();\r\n    },\r\n    //点击红包 看视频领取\r\n    onRedBagTouchEnd(event){\r\n        httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'幸运大奖',content:'红包看激励视频',desc:'点击'},function(){\r\n        });\r\n        if(this.itemReward.active){\r\n            return;\r\n        }\r\n        let onoff = this.luckyConfig.luckyOnOff;\r\n        if(onoff && onoff.length>0 && onoff[0].video == 1){\r\n            appGame.videoBanner.playVideoAd(1,onoff[0].force,function(isSuc){\r\n                console.log(\"看视频成功\")\r\n                this.onClientResultPlayAD({sceneId:7,eventId:1,isSuccess:true});\r\n                this.redBagBtnCallback && this.redBagBtnCallback();\r\n            }.bind(this));\r\n        }else{\r\n            this.onClientResultPlayAD({sceneId:7,eventId:1,isSuccess:true});\r\n            this.redBagBtnCallback && this.redBagBtnCallback();\r\n        }\r\n    },\r\n    //领取奖励\r\n    onGetTouchEnd(event){\r\n        httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'幸运大奖',content:'领取奖励',desc:'点击'},function(){\r\n        });\r\n        cc.log(\"领取=====\"+this.currentIndex)\r\n        this.refreshGetReward(this.currentIndex,1);\r\n    },\r\n    //领取奖励的刷新  enter 1相当于点击领取  3展示领取界面\r\n    refreshGetReward(index,enter){\r\n        underscore.each(this.tollgateConfig,function(key,value){\r\n            if(value == index-1){\r\n                if(enter==1){\r\n                    this.getRewardCallBack && this.getRewardCallBack(key.reward.itemId,key.reward.count);\r\n                }\r\n                this.itemReward.getChildByName('item').getComponent('item').init(key.reward.itemId)\r\n                this.itemReward.getChildByName('count').getComponent(cc.Label).string = '×'+key.reward.count \r\n                if(enter==1){\r\n                    cc.log(\"index===\"+index)\r\n                    this.redLabel.node.active = true;\r\n                    this.itemReward.active = false;\r\n                    this.redDragon.playAnimation('dajiang2',1)\r\n                    cc.sys.localStorage.setItem(\"luckReadyReceive\"+index,index)\r\n                    this.infoLabel.string = key.reward.info;\r\n                    for(let i=0;i<this.tollgateConfig.length;i++){\r\n                        let tempIndex = i+1;\r\n                        let seal = cc.sys.localStorage.getItem(\"luckUnseal\"+tempIndex);\r\n                        if(seal=='' || seal==null){\r\n                            this.currentIndex = tempIndex;\r\n                            this.redDragon.playAnimation('dajiang',2)\r\n                            this.refreshGetReward(tempIndex,4);\r\n                            this.hide();\r\n                            return;\r\n                        }\r\n                    }\r\n                    let isHad = 0;\r\n                    for(let i=0;i<this.tollgateConfig.length;i++){\r\n                        let tempIndex = i+1;\r\n                        let receive = cc.sys.localStorage.getItem(\"luckReadyReceive\"+tempIndex);\r\n                        if(receive=='' || receive==null){\r\n                            this.currentIndex = tempIndex;\r\n                            this.redDragon.playAnimation('dajiang2',1)\r\n                            this.refreshGetReward(tempIndex,3);\r\n                            this.hide();\r\n                            return;\r\n                        }else{\r\n                            isHad++;\r\n                        }\r\n                    }\r\n                    if(isHad == this.tollgateConfig.length){\r\n                        for(let i=0;i<this.tollgateConfig.length;i++){\r\n                            let tempIndex = i+1;\r\n                            cc.sys.localStorage.removeItem(\"luckReadyReceive\"+tempIndex);\r\n                            cc.sys.localStorage.removeItem(\"luckUnseal\"+tempIndex);\r\n                        }\r\n                        this.showRefreshUI(1);\r\n                        this.hide();\r\n                    }else{\r\n                        this.hide();\r\n                    }\r\n                }else if(enter == 2){\r\n                    this.openTouch.active = false;\r\n                    this.redLabel.node.active = false;\r\n                    this.itemReward.active = true;\r\n                    this.getBtn.node.active = true;\r\n                    this.closeBtn.node.active = false;\r\n                    this.unsealBtn.node.active = false;\r\n                    this.getBtn.interactable = false;\r\n                    this.getBtn.node.off(cc.Node.EventType.TOUCH_END, this.onGetTouchEnd, this);\r\n                    this.getBtn.node.getChildByName('label').getComponent(cc.Label).string = \"已领取\";\r\n                    this.infoLabel.string = '奖励已领取';\r\n                }else if(enter == 3){\r\n                    this.openTouch.active = false;\r\n                    this.redLabel.node.active = false;\r\n                    this.itemReward.active = true;\r\n                    this.getBtn.node.active = true;\r\n                    this.closeBtn.node.active = false;\r\n                    this.unsealBtn.node.active = false;\r\n                    this.getBtn.interactable = true;\r\n                    this.getBtn.node.on(cc.Node.EventType.TOUCH_END, this.onGetTouchEnd, this);\r\n                    this.getBtn.node.getChildByName('label').getComponent(cc.Label).string = \"领取\"\r\n                    this.infoLabel.string = \"恭喜获得\";\r\n                    httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'幸运大奖',content:'恭喜获得弹窗'},function(){\r\n                    });\r\n                }else if(enter == 4){\r\n                    this.redLabel.node.active = true;\r\n                    this.itemReward.active = false;\r\n                    this.getBtn.node.active = false;\r\n                    this.openTouch.active = true;\r\n                    this.openTouch.scale = 1.4;\r\n                    this.openTouch.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(0.5,1.2),cc.scaleTo(0.5,1.5))))\r\n                    let sealShow = this.luckyConfig.luckUnseal;\r\n                    if(sealShow&& sealShow.show == 1){\r\n                        let time = sealShow.delay*1000;\r\n                        unsealtimeOut = setTimeout(function(){\r\n                            this.closeBtn.node.active = true;\r\n                            this.unsealBtn.node.active = true;\r\n                        }.bind(this), time);\r\n                    }else{\r\n                        this.closeBtn.node.active = false;\r\n                        this.unsealBtn.node.active = false;\r\n                    }\r\n                    this.infoLabel.string = key.reward.info;\r\n                }\r\n            }\r\n        }.bind(this))\r\n    },\r\n\r\n    animationEventHandler(event){\r\n        if (event.type === dragonBones.EventObject.COMPLETE) {\r\n            if (event.animationState.name === \"dajiang\") {\r\n                this.redDragon.playAnimation('dajiang1',0)\r\n            }\r\n        }\r\n    },\r\n    onClientResultPlayAD(data){\r\n        if(data.sceneId==7){\r\n            if(data.isSuccess){\r\n                if(data.eventId==1){\r\n                    httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'幸运大奖',content:'红包看激励视频',desc:'播放完成'},function(){\r\n                    });\r\n                    cc.sys.localStorage.setItem(\"luckUnseal\"+this.currentIndex,this.currentIndex)\r\n                    this.redDragon.playAnimation('dajiang2',1)\r\n                    this.refreshGetReward(this.currentIndex,3);\r\n                }else if(data.eventId==2 ||data.eventId == 3){\r\n                    if(data.eventId == 3){\r\n                        httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'幸运大奖',content:'关闭界面',desc:'播放完成'},function(){\r\n                        });\r\n                    }\r\n                    this.hide();\r\n                }\r\n            }\r\n        }\r\n    },\r\n    hide(){\r\n        clearTimeout(unsealtimeOut);\r\n        clearTimeout(bannerTimeOut);\r\n        appGame.banner.playBanner(3);\r\n        appGame.appBoxAd.playBox(false);\r\n        appGame.blockAd.playBlockad(false);\r\n        this.node.removeFromParent();\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}