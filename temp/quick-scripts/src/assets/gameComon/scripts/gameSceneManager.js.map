{"version":3,"sources":["assets\\gameComon\\scripts\\gameSceneManager.js"],"names":["AppGame","GameSceneManager","cc","Class","Component","properties","onLoad","require","init","initAppData","RoomGame","appGame","gameServerRoom","create","bind","emitter","on","consts","HTTP_EVENT_MIDDLE_DESK_CONFIG","refreshGameConfig","LOCAL_EVENT_POPUP_LOADTIP","showLoadTipFun","LOCAL_EVENT_POPUP_DIALOG","showDialogFun","LOCAL_EVENT_POPUP_GAME_COMMON","showCommonUIFun","onDestroy","off","data","VideoBanner","videoBanner","InterstitialAd","interstitialAd","Banner","banner","WXNativeAd","nativeAd","WwxgridAd","gridAd","AppBoxAd","appBoxAd","BlockAd","blockAd","ScreenrecordAuto","screenAuto","cb","userId","sys","localStorage","getItem","util","guid","setItem","platform","VIVO_GAME","qg","getSystemInfo","success","deviceInfo","BAIDU_GAME","swan","res","console","log","fail","BYTEDANCE_GAME","tt","MOBILE_BROWSER","DESKTOP_BROWSER","OPPO_GAME","err","complete","XIAOMI_GAME","ANDROID","httpUtils","httpPost","HTTP_RECORD_SERVER","title","content","appStartTime","Date","getTime","countEnter","parseInt","desc","disConnectFun","emit","okLabel","okCB","opts","popupPanelEventCallback","zIndex","prefabName","assetManager","loadBundle","bundle","load","Prefab","error","prefab","isShowing","canvasParent","find","childrenCount","i","children","length","name","instance","instantiate","addChild","controlComponent","getComponent","show","active","removeFromParent","showGameHelpFun","prefabPath","loader","loadRes","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var AppGame = null;\r\nvar GameSceneManager = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {},\r\n\r\n    onLoad: function () {\r\n        if(AppGame == null){\r\n            AppGame = require('appGame');\r\n            AppGame.init();\r\n            this.initAppData(function(){\r\n                var RoomGame = require('roomGame');\r\n                appGame.gameServerRoom = RoomGame.create({});\r\n            }.bind(this));\r\n        }\r\n        appGame.emitter.on(consts.HTTP_EVENT_MIDDLE_DESK_CONFIG,this.refreshGameConfig);\r\n        appGame.emitter.on(consts.LOCAL_EVENT_POPUP_LOADTIP,this.showLoadTipFun);\r\n        appGame.emitter.on(consts.LOCAL_EVENT_POPUP_DIALOG,this.showDialogFun);\r\n        appGame.emitter.on(consts.LOCAL_EVENT_POPUP_GAME_COMMON,this.showCommonUIFun);\r\n    },\r\n\r\n    onDestroy(){\r\n        appGame.emitter.off(consts.HTTP_EVENT_MIDDLE_DESK_CONFIG,this.refreshGameConfig);\r\n        appGame.emitter.off(consts.LOCAL_EVENT_POPUP_DIALOG,this.showDialogFun);\r\n        appGame.emitter.off(consts.LOCAL_EVENT_POPUP_LOADTIP,this.showLoadTipFun);\r\n        appGame.emitter.off(consts.LOCAL_EVENT_POPUP_GAME_COMMON,this.showCommonUIFun);\r\n    },\r\n\r\n    refreshGameConfig(data){\r\n        var VideoBanner = require('videoBanner');\r\n        appGame.videoBanner = VideoBanner.create({});\r\n        var InterstitialAd = require('interstitialAd');\r\n        appGame.interstitialAd = InterstitialAd.create({});\r\n        var Banner = require('banner');\r\n        appGame.banner = Banner.create({});\r\n        var WXNativeAd = require('wxnativeAd');\r\n        appGame.nativeAd = WXNativeAd.create({});\r\n        var WwxgridAd = require('wxgridAd');\r\n        appGame.gridAd = WwxgridAd.create({});\r\n        var AppBoxAd = require('qqAppBox');\r\n        appGame.appBoxAd = AppBoxAd.create({});\r\n        var BlockAd = require('qqBlockAd');\r\n        appGame.blockAd = BlockAd.create({});\r\n        var ScreenrecordAuto = require('screenrecordAuto');\r\n        appGame.screenAuto = ScreenrecordAuto.create({});\r\n    },\r\n\r\n    initAppData(cb){\r\n        appGame.userId = cc.sys.localStorage.getItem(\"snmi_guid\");\r\n        if(appGame.userId==null || appGame.userId==''){\r\n            appGame.userId = util.guid();\r\n            cc.sys.localStorage.setItem(\"snmi_guid\",appGame.userId);\r\n        }\r\n\r\n        if(cc.sys.platform === cc.sys.VIVO_GAME){\r\n            if(qg){\r\n                qg.getSystemInfo({\r\n                    success: function (data) {\r\n                        appGame.deviceInfo = data;\r\n                    }\r\n                })\r\n            }\r\n        }else if(cc.sys.platform == cc.sys.BAIDU_GAME){\r\n            swan.getSystemInfo({\r\n                success(res) {\r\n                  console.log(res);\r\n                  appGame.deviceInfo = res;\r\n                },\r\n                fail(res) {\r\n                  console.log(`getSystemInfo 调用失败`);\r\n                },\r\n              });\r\n        }else if(cc.sys.platform == cc.sys.BYTEDANCE_GAME){\r\n            tt.getSystemInfo({\r\n                success(res) {\r\n                  console.log(res);\r\n                  appGame.deviceInfo = res;\r\n                },\r\n                fail(res) {\r\n                  console.log(`getSystemInfo 调用失败`);\r\n                },\r\n              });\r\n        }else if(cc.sys.platform == cc.sys.MOBILE_BROWSER ||cc.sys.platform == cc.sys.DESKTOP_BROWSER){\r\n            appGame.deviceInfo = '';\r\n        }else if(cc.sys.platform == cc.sys.OPPO_GAME){\r\n            qg.getSystemInfo({\r\n                success: function(res) {\r\n                    appGame.deviceInfo = res;\r\n                },\r\n                fail: function(err) {},\r\n                complete: function(res) {}\r\n            })\r\n        }else if(cc.sys.platform == cc.sys.XIAOMI_GAME){\r\n            qg.getSystemInfo({\r\n                success: function(res) {\r\n                    appGame.deviceInfo = res;\r\n                },\r\n                fail: function(err) {},\r\n                complete: function(res) {}\r\n            })\r\n        }else if(cc.sys.platform == cc.sys.ANDROID){\r\n            appGame.deviceInfo = '';\r\n        }else{\r\n            appGame.deviceInfo = '';\r\n        }\r\n        httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'登录',content:'进入主界面'},function(){\r\n        });\r\n        appGame.appStartTime = new Date().getTime();\r\n        \r\n        let countEnter = cc.sys.localStorage.getItem(\"snmi_entercount\");\r\n        if(countEnter==null || countEnter==''){\r\n            countEnter = 1;\r\n            cc.sys.localStorage.setItem(\"snmi_entercount\",1);\r\n        }else{\r\n            countEnter = parseInt(countEnter);\r\n            countEnter++;\r\n            cc.sys.localStorage.setItem(\"snmi_entercount\",countEnter);\r\n        }\r\n        httpUtils.httpPost(consts.HTTP_RECORD_SERVER,{title:'打开APP',content:'进入游戏次数统计',desc:countEnter},function(){\r\n        });\r\n        cb();\r\n    },\r\n\r\n    disConnectFun() {\r\n        appGame.emitter.emit(consts.LOCAL_EVENT_POPUP_DIALOG, {\r\n            title: '提示',\r\n            content: \"网络已断开\\n是否退出重连？\",\r\n            okLabel:\"确定\",\r\n            okCB: function () {\r\n                //App.SceneManager.changeScene(\"Login\");\r\n                //App.isReconnect = false;\r\n            }.bind(this),\r\n        });\r\n    },\r\n\r\n    showCommonUIFun(opts){\r\n        let popupPanelEventCallback = function (opts, zIndex, cb) {\r\n            if(opts && opts.prefabName){\r\n                cc.log(\"prefabName==\"+opts.prefabName)\r\n                cc.assetManager.loadBundle(opts.bundle, function(err, bundle){\r\n                    bundle.load(opts.prefabName, cc.Prefab, function (error, prefab) {\r\n                        if (error) {\r\n                            cc.error(error);\r\n                            return;\r\n                        }\r\n                        let isShowing = false;\r\n                        let canvasParent = cc.find('Canvas');\r\n                        if(canvasParent.childrenCount>0){\r\n                            for(let i=0;i<canvasParent.children.length;i++){\r\n                                if(canvasParent.children[i].name == opts.prefabName){\r\n                                    isShowing = true;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                        if(isShowing){\r\n                            return;\r\n                        }\r\n                        // let canvasParent = cc.find('Canvas');\r\n                        // if(canvasParent.childrenCount>0){\r\n                        //     for(let i=0;i<canvasParent.children.length;i++){\r\n                        //         if(canvasParent.children[i].name == opts.prefabName){\r\n                        //             cc.log(\"prefabName==删除\")\r\n                        //             canvasParent.children[i].removeFromParent();\r\n                        //         }\r\n                        //     }\r\n                        // }\r\n                        var instance = cc.instantiate(prefab);\r\n                        canvasParent.addChild(instance);\r\n        \r\n                        var controlComponent = instance.getComponent(opts.prefabName);\r\n                        controlComponent && controlComponent.show && controlComponent.show(opts); //所有弹出层控制组件都应实现这个函数，确保触发事件时传递的参数能传递到界面\r\n        \r\n                        instance.zIndex = zIndex;\r\n                        instance.active = true;\r\n        \r\n                        cb && cb(null, instance);\r\n                    }.bind(this));\r\n                }.bind(this));\r\n            }\r\n        };\r\n        opts = opts || {};\r\n        popupPanelEventCallback(opts, opts.zIndex ||1300);\r\n    },\r\n\r\n    showDialogFun(opts){\r\n        let popupPanelEventCallback = function (prefabName, opts, zIndex, cb) {\r\n            cc.assetManager.loadBundle('comPrefab', function(err, bundle){\r\n                bundle.load(prefabName, cc.Prefab, function (error, prefab) {\r\n                    if (error) {\r\n                        cc.error(error);\r\n                        return;\r\n                    }\r\n                    let canvasParent = cc.find('Canvas');\r\n                    if(canvasParent.childrenCount>0){\r\n                        for(let i=0;i<canvasParent.children.length;i++){\r\n                            if(canvasParent.children[i].name == 'dialogBox'){\r\n                                canvasParent.children[i].removeFromParent();\r\n                            }\r\n                        }\r\n                    }\r\n                    var instance = cc.instantiate(prefab);\r\n                    canvasParent.addChild(instance);\r\n    \r\n                    var controlComponent = instance.getComponent(prefabName);\r\n                    controlComponent && controlComponent.show && controlComponent.show(opts); //所有弹出层控制组件都应实现这个函数，确保触发事件时传递的参数能传递到界面\r\n    \r\n                    instance.zIndex = zIndex;\r\n                    instance.active = true;\r\n    \r\n                    cb && cb(null, instance);\r\n                }.bind(this));\r\n            }.bind(this));\r\n        };\r\n        opts = opts || {};\r\n        popupPanelEventCallback('dialogBox', opts, opts.zIndex ||1400);\r\n    },\r\n\r\n    showLoadTipFun(opts){\r\n        let popupPanelEventCallback = function (prefabName, opts, zIndex, cb) {\r\n            cc.assetManager.loadBundle('comPrefab', function(err, bundle){\r\n                bundle.load(prefabName, cc.Prefab, function (error, prefab) {\r\n                    if (error) {\r\n                        cc.error(error);\r\n                        return;\r\n                    }\r\n                    let canvasParent = cc.find('Canvas');\r\n                    if(canvasParent.childrenCount>0){\r\n                        for(let i=0;i<canvasParent.children.length;i++){\r\n                            if(canvasParent.children[i].name == 'loadTip'){\r\n                                canvasParent.children[i].removeFromParent();\r\n                            }\r\n                        }\r\n                    }\r\n                    var instance = cc.instantiate(prefab);\r\n                    canvasParent.addChild(instance);\r\n    \r\n                    var controlComponent = instance.getComponent(prefabName);\r\n                    controlComponent && controlComponent.show && controlComponent.show(opts); //所有弹出层控制组件都应实现这个函数，确保触发事件时传递的参数能传递到界面\r\n    \r\n                    instance.zIndex = zIndex;\r\n                    instance.active = true;\r\n    \r\n                    cb && cb(null, instance);\r\n                }.bind(this));\r\n            }.bind(this));\r\n        };\r\n        opts = opts || {};\r\n        popupPanelEventCallback('loadTip', opts, opts.zIndex ||1500);\r\n    },\r\n\r\n    showGameHelpFun(opts){\r\n        let popupPanelEventCallback = function (prefabName, opts, zIndex, cb) {\r\n            var prefabPath = 'gameComon/prefab/' + prefabName;\r\n            cc.loader.loadRes(prefabPath, cc.Prefab, function (error, prefab) {\r\n                if (error) {\r\n                    cc.error(error);\r\n                    return;\r\n                }\r\n                var instance = cc.instantiate(prefab);\r\n                cc.find('Canvas').addChild(instance);\r\n\r\n                //cc.find(\"Canvas/alert\").addChild(instance);\r\n                var controlComponent = instance.getComponent(prefabName);\r\n                controlComponent && controlComponent.show && controlComponent.show(opts); //所有弹出层控制组件都应实现这个函数，确保触发事件时传递的参数能传递到界面\r\n\r\n                instance.zIndex = zIndex;\r\n                instance.active = true;\r\n\r\n                cb && cb(null, instance);\r\n            });\r\n        };\r\n        opts = opts || {};\r\n        popupPanelEventCallback('helpPanel', opts, opts.zIndex ||1000);\r\n    },\r\n});\r\nmodule.exports = GameSceneManager;\r\n"]}