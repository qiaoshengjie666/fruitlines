
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/gameComon/scripts/ad/interstitialAd.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '65bb3OPXhxMDIngU6dETA4S', 'interstitialAd');
// gameComon/scripts/ad/interstitialAd.js

"use strict";

var InterstitialAd = cc.Class({
  properties: {},
  ctor: function ctor() {
    this.instance = null;
  },
  statics: {
    create: function create(data) {
      if (!this.instance) {
        this.instance = new InterstitialAd();
        this.instance.initWithData(data);
        return this.instance;
      }
    }
  },
  initWithData: function initWithData(data) {
    this.adId = '';

    if (cc.sys.platform == cc.sys.WECHAT_GAME && appGame.platform == 'QQ') {
      //qq
      this.adId = 'e93d7d4378e53c49b258b80960fb84c1';

      if (appGame.gameServerRoom.adConfig && appGame.gameServerRoom.adConfig.interstitialId && appGame.gameServerRoom.adConfig.interstitialId.QQ) {
        this.adId = appGame.gameServerRoom.adConfig.interstitialId.QQ.adUnitId;
      }

      this.globalData = {
        interstitialAd: qq.createInterstitialAd({
          adUnitId: this.adId
        })
      };
      console.log("插屏广告==" + this.adId);
      httpUtils.httpPost(consts.HTTP_RECORD_SERVER, {
        title: '插屏广告',
        content: '创建成功',
        desc: this.adId
      }, function () {});
    } else if (cc.sys.platform == cc.sys.WECHAT_GAME && appGame.platform == 'WX') {
      //微信
      this.adId = 'c5b484afd6953432';

      if (appGame.gameServerRoom.adConfig && appGame.gameServerRoom.adConfig.interstitialId && appGame.gameServerRoom.adConfig.interstitialId.WX) {
        this.adId = appGame.gameServerRoom.adConfig.interstitialId.WX.adUnitId;
      }

      httpUtils.httpPost(consts.HTTP_RECORD_SERVER, {
        title: '插屏广告',
        content: '创建成功',
        desc: this.adId
      }, function () {});
    } else if (cc.sys.platform == cc.sys.BYTEDANCE_GAME) {
      //字节
      this.adId = '15c24vd9ppqti8jgb3';

      if (appGame.gameServerRoom.adConfig && appGame.gameServerRoom.adConfig.interstitialId && appGame.gameServerRoom.adConfig.interstitialId.toutiao) {
        this.adId = appGame.gameServerRoom.adConfig.interstitialId.toutiao.adUnitId;
      }

      httpUtils.httpPost(consts.HTTP_RECORD_SERVER, {
        title: '插屏广告',
        content: '创建成功',
        desc: this.adId
      }, function () {});
    }
  },
  playAd: function playAd() {
    var _this = this;

    if (cc.sys.platform == cc.sys.BYTEDANCE_GAME && appGame.gameServerRoom.gameConfigData && appGame.gameServerRoom.gameConfigData.isbanner) {
      console.log("banner return");
      return;
    }

    console.log("播放插屏广告==");

    if (cc.sys.platform == cc.sys.BYTEDANCE_GAME) {
      //头条平台
      if (this.globalData && this.globalData.interstitialAd) {
        this.globalData.interstitialAd.destroy();
        this.globalData.interstitialAd = null;
      }

      this.globalData = {
        interstitialAd: tt.createInterstitialAd({
          adUnitId: this.adId
        })
      };
      httpUtils.httpPost(consts.HTTP_RECORD_SERVER, {
        title: '插屏广告',
        content: '创建成功',
        desc: this.adId
      }, function () {});
      this.globalData.interstitialAd.load().then(function () {
        console.log("插屏显示成功");
        httpUtils.httpPost(consts.HTTP_RECORD_SERVER, {
          title: '插屏广告',
          content: '显示成功',
          desc: _this.adId
        }, function () {});
        return _this.globalData.interstitialAd.show();
      })["catch"](function (err) {
        httpUtils.httpPost(consts.HTTP_RECORD_SERVER, {
          title: '插屏广告',
          content: '显示失败',
          desc: _this.adId
        }, function () {});
        console.log("插屏组件出现问题", err);
      });
      this.globalData.interstitialAd.onError(function (listener) {
        httpUtils.httpPost(consts.HTTP_RECORD_SERVER, {
          title: '插屏广告',
          content: _this.adId,
          desc: listener.errCode + listener.errMsg
        }, function () {});
      });
    } else if (cc.sys.platform == cc.sys.WECHAT_GAME && appGame.platform == 'WX') {
      //微信平台
      if (this.globalData && this.globalData.interstitialAd) {
        this.globalData.interstitialAd.offError();
        this.globalData.interstitialAd.destroy();
        this.globalData.interstitialAd = null;
        console.log("销毁");
        httpUtils.httpPost(consts.HTTP_RECORD_SERVER, {
          title: '插屏广告',
          content: '销毁广告',
          desc: this.adId
        }, function () {});
      }

      this.globalData = {
        /* 建议放在onReady里执行，提前加载广告 */
        InterstitialAd: wx.createInterstitialAd({
          adUnitId: this.adId
        })
      };
      httpUtils.httpPost(consts.HTTP_RECORD_SERVER, {
        title: '插屏广告',
        content: '创建成功',
        desc: this.adId
      }, function () {});
      this.globalData.InterstitialAd.load()["catch"](function (err) {
        console.error('load', err);
      });
      this.globalData.InterstitialAd.onLoad(function () {
        console.log('onLoad event emit');

        _this.globalData.InterstitialAd.show()["catch"](function (err) {
          httpUtils.httpPost(consts.HTTP_RECORD_SERVER, {
            title: '插屏广告',
            content: '显示成功',
            desc: _this.adId
          }, function () {});
          console.error('show', err);
        });
      });
      this.globalData.InterstitialAd.onClose(function () {
        console.log('close event emit');
      });
      this.globalData.InterstitialAd.onError(function (listener) {
        httpUtils.httpPost(consts.HTTP_RECORD_SERVER, {
          title: '插屏广告',
          content: _this.adId,
          desc: listener.errCode + listener.errMsg
        }, function () {});
      });
      /* 建议放在需要展示插屏广告的时机执行 */
    } else {
      if (this.globalData && this.globalData.interstitialAd) {
        var interstitialAd = this.globalData.interstitialAd;
        interstitialAd.load().then(function () {
          console.log("插屏显示成功");
          httpUtils.httpPost(consts.HTTP_RECORD_SERVER, {
            title: '插屏广告',
            content: '显示成功',
            desc: _this.adId
          }, function () {});
          return interstitialAd.show();
        })["catch"](function (err) {
          httpUtils.httpPost(consts.HTTP_RECORD_SERVER, {
            title: '插屏广告',
            content: '显示失败',
            desc: _this.adId
          }, function () {});
          console.log("插屏组件出现问题", err);
        });
      }
    }
  }
});
module.exports = InterstitialAd;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZUNvbW9uXFxzY3JpcHRzXFxhZFxcaW50ZXJzdGl0aWFsQWQuanMiXSwibmFtZXMiOlsiSW50ZXJzdGl0aWFsQWQiLCJjYyIsIkNsYXNzIiwicHJvcGVydGllcyIsImN0b3IiLCJpbnN0YW5jZSIsInN0YXRpY3MiLCJjcmVhdGUiLCJkYXRhIiwiaW5pdFdpdGhEYXRhIiwiYWRJZCIsInN5cyIsInBsYXRmb3JtIiwiV0VDSEFUX0dBTUUiLCJhcHBHYW1lIiwiZ2FtZVNlcnZlclJvb20iLCJhZENvbmZpZyIsImludGVyc3RpdGlhbElkIiwiUVEiLCJhZFVuaXRJZCIsImdsb2JhbERhdGEiLCJpbnRlcnN0aXRpYWxBZCIsInFxIiwiY3JlYXRlSW50ZXJzdGl0aWFsQWQiLCJjb25zb2xlIiwibG9nIiwiaHR0cFV0aWxzIiwiaHR0cFBvc3QiLCJjb25zdHMiLCJIVFRQX1JFQ09SRF9TRVJWRVIiLCJ0aXRsZSIsImNvbnRlbnQiLCJkZXNjIiwiV1giLCJCWVRFREFOQ0VfR0FNRSIsInRvdXRpYW8iLCJwbGF5QWQiLCJnYW1lQ29uZmlnRGF0YSIsImlzYmFubmVyIiwiZGVzdHJveSIsInR0IiwibG9hZCIsInRoZW4iLCJzaG93IiwiZXJyIiwib25FcnJvciIsImxpc3RlbmVyIiwiZXJyQ29kZSIsImVyck1zZyIsIm9mZkVycm9yIiwid3giLCJlcnJvciIsIm9uTG9hZCIsIm9uQ2xvc2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLGNBQWMsR0FBR0MsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDMUJDLEVBQUFBLFVBQVUsRUFBRSxFQURjO0FBRzFCQyxFQUFBQSxJQUgwQixrQkFHcEI7QUFDRixTQUFLQyxRQUFMLEdBQWdCLElBQWhCO0FBQ0gsR0FMeUI7QUFNMUJDLEVBQUFBLE9BQU8sRUFBRTtBQUNMQyxJQUFBQSxNQUFNLEVBQUUsZ0JBQVVDLElBQVYsRUFBZ0I7QUFDcEIsVUFB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LEtBQUksQ0FBQ3RCO0FBQXZDLFdBQTdDLEVBQTBGLFlBQVUsQ0FDbkcsQ0FERDtBQUVBYyxVQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxVQUFaLEVBQXdCbUIsR0FBeEI7QUFDSCxTQVpEO0FBYUg7QUFDSjtBQUNKO0FBeEl5QixDQUFULENBQXJCO0FBMElBVSxNQUFNLENBQUNDLE9BQVAsR0FBaUJ2RCxjQUFqQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIEludGVyc3RpdGlhbEFkID0gY2MuQ2xhc3Moe1xyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgfSxcclxuICAgIGN0b3IoKXtcclxuICAgICAgICB0aGlzLmluc3RhbmNlID0gbnVsbDtcclxuICAgIH0sXHJcbiAgICBzdGF0aWNzOiB7XHJcbiAgICAgICAgY3JlYXRlOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBpZighdGhpcy5pbnN0YW5jZSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlID0gbmV3IEludGVyc3RpdGlhbEFkKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLmluaXRXaXRoRGF0YShkYXRhKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGluaXRXaXRoRGF0YTogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICB0aGlzLmFkSWQgPSAnJztcclxuICAgICAgICBpZihjYy5zeXMucGxhdGZvcm0gPT0gY2Muc3lzLldFQ0hBVF9HQU1FICYmIGFwcEdhbWUucGxhdGZvcm0gPT0gJ1FRJyl7IC8vcXFcclxuICAgICAgICAgICAgdGhpcy5hZElkID0gJ2U5M2Q3ZDQzNzhlNTNjNDliMjU4YjgwOTYwZmI4NGMxJztcclxuICAgICAgICAgICAgaWYoYXBwR2FtZS5nYW1lU2VydmVyUm9vbS5hZENvbmZpZyAmJiBhcHBHYW1lLmdhbWVTZXJ2ZXJSb29tLmFkQ29uZmlnLmludGVyc3RpdGlhbElkICYmIGFwcEdhbWUuZ2FtZVNlcnZlclJvb20uYWRDb25maWcuaW50ZXJzdGl0aWFsSWQuUVEpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZElkID0gYXBwR2FtZS5nYW1lU2VydmVyUm9vbS5hZENvbmZpZy5pbnRlcnN0aXRpYWxJZC5RUS5hZFVuaXRJZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmdsb2JhbERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBpbnRlcnN0aXRpYWxBZDogcXEuY3JlYXRlSW50ZXJzdGl0aWFsQWQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGFkVW5pdElkOiB0aGlzLmFkSWRcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5o+S5bGP5bm/5ZGKPT1cIit0aGlzLmFkSWQpXHJcbiAgICAgICAgICAgIGh0dHBVdGlscy5odHRwUG9zdChjb25zdHMuSFRUUF9SRUNPUkRfU0VSVkVSLHt0aXRsZTon5o+S5bGP5bm/5ZGKJyxjb250ZW50OifliJvlu7rmiJDlip8nLGRlc2M6dGhpcy5hZElkfSxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9ZWxzZSBpZihjYy5zeXMucGxhdGZvcm0gPT0gY2Muc3lzLldFQ0hBVF9HQU1FICYmIGFwcEdhbWUucGxhdGZvcm0gPT0gJ1dYJyl7IC8v5b6u5L+hXHJcbiAgICAgICAgICAgIHRoaXMuYWRJZCA9ICdjNWI0ODRhZmQ2OTUzNDMyJztcclxuICAgICAgICAgICAgaWYoYXBwR2FtZS5nYW1lU2VydmVyUm9vbS5hZENvbmZpZyAmJiBhcHBHYW1lLmdhbWVTZXJ2ZXJSb29tLmFkQ29uZmlnLmludGVyc3RpdGlhbElkICYmIGFwcEdhbWUuZ2FtZVNlcnZlclJvb20uYWRDb25maWcuaW50ZXJzdGl0aWFsSWQuV1gpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZElkID0gYXBwR2FtZS5nYW1lU2VydmVyUm9vbS5hZENvbmZpZy5pbnRlcnN0aXRpYWxJZC5XWC5hZFVuaXRJZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBodHRwVXRpbHMuaHR0cFBvc3QoY29uc3RzLkhUVFBfUkVDT1JEX1NFUlZFUix7dGl0bGU6J+aPkuWxj+W5v+WRiicsY29udGVudDon5Yib5bu65oiQ5YqfJyxkZXNjOnRoaXMuYWRJZH0sZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfWVsc2UgaWYoY2Muc3lzLnBsYXRmb3JtID09IGNjLnN5cy5CWVRFREFOQ0VfR0FNRSl7IC8v5a2X6IqCXHJcbiAgICAgICAgICAgIHRoaXMuYWRJZCA9ICcxNWMyNHZkOXBwcXRpOGpnYjMnO1xyXG4gICAgICAgICAgICBpZihhcHBHYW1lLmdhbWVTZXJ2ZXJSb29tLmFkQ29uZmlnICYmIGFwcEdhbWUuZ2FtZVNlcnZlclJvb20uYWRDb25maWcuaW50ZXJzdGl0aWFsSWQgJiYgYXBwR2FtZS5nYW1lU2VydmVyUm9vbS5hZENvbmZpZy5pbnRlcnN0aXRpYWxJZC50b3V0aWFvKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRJZCA9IGFwcEdhbWUuZ2FtZVNlcnZlclJvb20uYWRDb25maWcuaW50ZXJzdGl0aWFsSWQudG91dGlhby5hZFVuaXRJZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBodHRwVXRpbHMuaHR0cFBvc3QoY29uc3RzLkhUVFBfUkVDT1JEX1NFUlZFUix7dGl0bGU6J+aPkuWxj+W5v+WRiicsY29udGVudDon5Yib5bu65oiQ5YqfJyxkZXNjOnRoaXMuYWRJZH0sZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHBsYXlBZDpmdW5jdGlvbigpIHtcclxuICAgICAgICBpZihjYy5zeXMucGxhdGZvcm0gPT0gY2Muc3lzLkJZVEVEQU5DRV9HQU1FICYmIGFwcEdhbWUuZ2FtZVNlcnZlclJvb20uZ2FtZUNvbmZpZ0RhdGEmJlxyXG4gICAgICAgICAgICBhcHBHYW1lLmdhbWVTZXJ2ZXJSb29tLmdhbWVDb25maWdEYXRhLmlzYmFubmVyKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJiYW5uZXIgcmV0dXJuXCIpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2coXCLmkq3mlL7mj5LlsY/lub/lkYo9PVwiKVxyXG4gICAgICAgIGlmKGNjLnN5cy5wbGF0Zm9ybSA9PSBjYy5zeXMuQllURURBTkNFX0dBTUUpeyAvL+WktOadoeW5s+WPsFxyXG4gICAgICAgICAgICBpZih0aGlzLmdsb2JhbERhdGEgJiYgdGhpcy5nbG9iYWxEYXRhLmludGVyc3RpdGlhbEFkKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsRGF0YS5pbnRlcnN0aXRpYWxBZC5kZXN0cm95KCk7IFxyXG4gICAgICAgICAgICAgICAgdGhpcy5nbG9iYWxEYXRhLmludGVyc3RpdGlhbEFkID0gbnVsbDsgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5nbG9iYWxEYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgaW50ZXJzdGl0aWFsQWQ6IHR0LmNyZWF0ZUludGVyc3RpdGlhbEFkKHtcclxuICAgICAgICAgICAgICAgICAgICBhZFVuaXRJZDogdGhpcy5hZElkXHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBodHRwVXRpbHMuaHR0cFBvc3QoY29uc3RzLkhUVFBfUkVDT1JEX1NFUlZFUix7dGl0bGU6J+aPkuWxj+W5v+WRiicsY29udGVudDon5Yib5bu65oiQ5YqfJyxkZXNjOnRoaXMuYWRJZH0sZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFsRGF0YS5pbnRlcnN0aXRpYWxBZC5sb2FkKClcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLmj5LlsY/mmL7npLrmiJDlip9cIik7XHJcbiAgICAgICAgICAgICAgICBodHRwVXRpbHMuaHR0cFBvc3QoY29uc3RzLkhUVFBfUkVDT1JEX1NFUlZFUix7dGl0bGU6J+aPkuWxj+W5v+WRiicsY29udGVudDon5pi+56S65oiQ5YqfJyxkZXNjOnRoaXMuYWRJZH0sZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2xvYmFsRGF0YS5pbnRlcnN0aXRpYWxBZC5zaG93KCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBodHRwVXRpbHMuaHR0cFBvc3QoY29uc3RzLkhUVFBfUkVDT1JEX1NFUlZFUix7dGl0bGU6J+aPkuWxj+W5v+WRiicsY29udGVudDon5pi+56S65aSx6LSlJyxkZXNjOnRoaXMuYWRJZH0sZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLmj5LlsY/nu4Tku7blh7rnjrDpl67pophcIiwgZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFsRGF0YS5pbnRlcnN0aXRpYWxBZC5vbkVycm9yKChsaXN0ZW5lcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaHR0cFV0aWxzLmh0dHBQb3N0KGNvbnN0cy5IVFRQX1JFQ09SRF9TRVJWRVIse3RpdGxlOifmj5LlsY/lub/lkYonLGNvbnRlbnQ6dGhpcy5hZElkLGRlc2M6bGlzdGVuZXIuZXJyQ29kZStsaXN0ZW5lci5lcnJNc2d9LGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1lbHNlIGlmIChjYy5zeXMucGxhdGZvcm0gPT0gY2Muc3lzLldFQ0hBVF9HQU1FICYmIGFwcEdhbWUucGxhdGZvcm0gPT0gJ1dYJykgeyAvL+W+ruS/oeW5s+WPsFxyXG4gICAgICAgICAgICBpZiAodGhpcy5nbG9iYWxEYXRhICYmIHRoaXMuZ2xvYmFsRGF0YS5pbnRlcnN0aXRpYWxBZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nbG9iYWxEYXRhLmludGVyc3RpdGlhbEFkLm9mZkVycm9yKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbERhdGEuaW50ZXJzdGl0aWFsQWQuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nbG9iYWxEYXRhLmludGVyc3RpdGlhbEFkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi6ZSA5q+BXCIpXHJcbiAgICAgICAgICAgICAgICBodHRwVXRpbHMuaHR0cFBvc3QoY29uc3RzLkhUVFBfUkVDT1JEX1NFUlZFUix7dGl0bGU6J+aPkuWxj+W5v+WRiicsY29udGVudDon6ZSA5q+B5bm/5ZGKJyxkZXNjOnRoaXMuYWRJZH0sZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFsRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIC8qIOW7uuiuruaUvuWcqG9uUmVhZHnph4zmiafooYzvvIzmj5DliY3liqDovb3lub/lkYogKi9cclxuICAgICAgICAgICAgICAgIEludGVyc3RpdGlhbEFkIDp3eC5jcmVhdGVJbnRlcnN0aXRpYWxBZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRVbml0SWQ6IHRoaXMuYWRJZFxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBodHRwVXRpbHMuaHR0cFBvc3QoY29uc3RzLkhUVFBfUkVDT1JEX1NFUlZFUix7dGl0bGU6J+aPkuWxj+W5v+WRiicsY29udGVudDon5Yib5bu65oiQ5YqfJyxkZXNjOnRoaXMuYWRJZH0sZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFsRGF0YS5JbnRlcnN0aXRpYWxBZC5sb2FkKCkuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignbG9hZCcsIGVycilcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgdGhpcy5nbG9iYWxEYXRhLkludGVyc3RpdGlhbEFkLm9uTG9hZCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnb25Mb2FkIGV2ZW50IGVtaXQnKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5nbG9iYWxEYXRhLkludGVyc3RpdGlhbEFkLnNob3coKS5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaHR0cFV0aWxzLmh0dHBQb3N0KGNvbnN0cy5IVFRQX1JFQ09SRF9TRVJWRVIse3RpdGxlOifmj5LlsY/lub/lkYonLGNvbnRlbnQ6J+aYvuekuuaIkOWKnycsZGVzYzp0aGlzLmFkSWR9LGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignc2hvdycsIGVycilcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFsRGF0YS5JbnRlcnN0aXRpYWxBZC5vbkNsb3NlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjbG9zZSBldmVudCBlbWl0JylcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgdGhpcy5nbG9iYWxEYXRhLkludGVyc3RpdGlhbEFkLm9uRXJyb3IoKGxpc3RlbmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBodHRwVXRpbHMuaHR0cFBvc3QoY29uc3RzLkhUVFBfUkVDT1JEX1NFUlZFUix7dGl0bGU6J+aPkuWxj+W5v+WRiicsY29udGVudDp0aGlzLmFkSWQsZGVzYzpsaXN0ZW5lci5lcnJDb2RlK2xpc3RlbmVyLmVyck1zZ30sZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAvKiDlu7rorq7mlL7lnKjpnIDopoHlsZXnpLrmj5LlsY/lub/lkYrnmoTml7bmnLrmiafooYwgKi9cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgaWYodGhpcy5nbG9iYWxEYXRhICYmIHRoaXMuZ2xvYmFsRGF0YS5pbnRlcnN0aXRpYWxBZCl7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW50ZXJzdGl0aWFsQWQgPSB0aGlzLmdsb2JhbERhdGEuaW50ZXJzdGl0aWFsQWQ7XHJcbiAgICAgICAgICAgICAgICBpbnRlcnN0aXRpYWxBZFxyXG4gICAgICAgICAgICAgICAgLmxvYWQoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5o+S5bGP5pi+56S65oiQ5YqfXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGh0dHBVdGlscy5odHRwUG9zdChjb25zdHMuSFRUUF9SRUNPUkRfU0VSVkVSLHt0aXRsZTon5o+S5bGP5bm/5ZGKJyxjb250ZW50OifmmL7npLrmiJDlip8nLGRlc2M6dGhpcy5hZElkfSxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnRlcnN0aXRpYWxBZC5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBodHRwVXRpbHMuaHR0cFBvc3QoY29uc3RzLkhUVFBfUkVDT1JEX1NFUlZFUix7dGl0bGU6J+aPkuWxj+W5v+WRiicsY29udGVudDon5pi+56S65aSx6LSlJyxkZXNjOnRoaXMuYWRJZH0sZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuaPkuWxj+e7hOS7tuWHuueOsOmXrumimFwiLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pO1xyXG5tb2R1bGUuZXhwb3J0cyA9IEludGVyc3RpdGlhbEFkO1xyXG4iXX0=